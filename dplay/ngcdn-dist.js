"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).NGCdn=e()}}(function(){var define,module,exports;return function o(s,a,c){function u(t,e){if(!a[t]){if(!s[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(p)return p(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[t]={exports:{}};s[t][0].call(i.exports,function(e){return u(s[t][1][e]||e)},i,i.exports,o,s,a,c)}return a[t].exports}for(var p="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,r){var o=268435456,u=e("./log").getLogger("cache"),p=e("./util"),i=e("./httploader"),s=e("./lzma");function n(e){if(this.maxBuffer=e||o,this.buffers=[],this.piecesInfo={updateAt:new Date,data:{}},this.localCachePieces={},this.localCache=[],window.localStorage){var t=window.localStorage,r=t.getItem("cache");if(r&&""!=r){this.localCache=JSON.parse(r);try{if(0<this.localCache.length){this.localCache[0].updateAt||(this.localCache=[]);for(var n=!0;n;){n=!1;for(var i=0;i<this.localCache.length;i++)if(1728e5<=(new Date).getTime()-this.localCache.updateAt){t.removeItem("cache_pieces_"+this.localCache[i].infoHash),this.localCache.splice(i,1),n=!0;break}}t.setItem("cache",JSON.stringify(this.localCache))}}catch(e){this.localCache=[]}}}}n.prototype.push=function(e,t,r,n,i){var o=0;for(o="string"==typeof r?r.length:r.byteLength,this.buffers.push({infoHash:e,piece:t,source:n,data:r,length:o});;){for(var s=0,a=-1,c=this.buffers.length-1;0<=c;c--)if((s+=this.buffers[c].length)>=this.maxBuffer){a=p.randomNum(1,this.buffers.length-1),this.buffers.splice(a,1);break}if(a<0)break}window.localStorage&&"http"==n&&this.pushLocalCachePieces(e,t,i),u.debug("buffer ",e,t," total: ",s)},n.prototype.getLocalCache=function(){return this.localCache.map(function(e){return e.infoHash})},n.prototype.getLocalCachePieces=function(e){if(!window.localStorage)return[];if(this.localCachePieces[e])return this.localCachePieces[e];var t=window.localStorage.getItem("cache_pieces_"+e);if(t&&""!=t)try{var r=t.split(",");r.forEach(function(e){e=parseInt(e)}),t=s.d(r),this.localCachePieces[e]=JSON.parse(t)}catch(e){u.debug("------------------------------2",t)}return this.localCachePieces[e]},n.prototype.removeLocalCachePiece=function(e,t){if(!window.localStorage)return[];var r=this.localCachePieces[e];if(r){for(var n=0;n<r.length;n++)if(r[n].piece==t){r.splice(n,1);break}storage.setItem("cache_pieces_"+e,s.c(JSON.stringify(this.localCachePieces[e])).join(","))}},n.prototype.pushLocalCachePieces=function(t,r,e){if(window.localStorage){var n=window.localStorage,i=this.localCache.find(function(e){return e.infoHash==t});i?i.updateAt=(new Date).getTime():this.localCache.push({infoHash:t,updateAt:(new Date).getTime()}),n.setItem("cache",JSON.stringify(this.localCache));var o=this.getLocalCachePieces(t);if(o){if(o.find(function(e){return e.piece==r}))return;this.localCachePieces[t].push({piece:r,url:e})}else this.localCachePieces[t]=[{piece:r,url:e}];n.setItem("cache_pieces_"+t,s.c(JSON.stringify(this.localCachePieces[t])).join(",")),u.debug("local cache piece",t)}},n.prototype.useRadio=function(){for(var e=0,t=this.buffers.length-1;0<=t;t--)e+=this.buffers[t].length;return Math.floor(e/o*100)/100},n.prototype.getPiecesInfo=function(t){var r=[];this.buffers.forEach(function(e){e.infoHash==t&&r.push(e.piece)});var e=this.getLocalCachePieces(t);return e&&e.forEach(function(e){0<=r.indexOf(e.piece)||r.push(e.piece)}),r},n.prototype.get=function(e,t){for(var r=null,n=this.buffers.length-1;0<=n;n--)if(this.buffers[n].infoHash==e&&this.buffers[n].piece==t){r=this.buffers[n].data;break}return r},n.prototype.getFromLocal=function(e,t,r){u.debug("getlocalstorage",e,t);var n=this.getLocalCachePieces(e);if(!(t=n.find(function(e){return e.piece==t})))return r("nodata");i.get(t.url,r)},t.exports=n},{"./httploader":4,"./log":5,"./lzma":6,"./util":37}],2:[function(e,t,r){e("extend");var i=e("./httploader"),n=(e("./cache"),e("./rtcloader"),e("url"),e("./log")),s=n.getLogger("cdn"),a=(e("./player"),e("url"),e("./version"),[]),o={debug:"INFO"},c=0;o.signalServer="wss://5peer.com:443";var u=function(){};function p(e){}p.prototype.getDplayer=function(e){return{url:e,type:"hls"}},p.prototype.queueSize=function(){return a.length},p.prototype.request=function(e,t,r,n,i){if(this._getBufferTime=n,this.cache){var o=this.cache.get(e,t);o&&(s.debug("got cache from memory.",e,t,r),setTimeout(function(){return i(null,o)},50))}return c++,a.push({reqid:c,createAt:new Date,infoHash:e,state:0,piece:t,url:r,cb:i}),s.debug("add download task",e,t),c},p.prototype.clear=function(e){return this.pieceLoad=0},p.prototype.abort=function(e){s.info("user abort task",e);for(var t=0;t<a.length;t++){var r=a[t];if(r.reqid==e){r.xhr&&(s.info("task",e,"have aborted"),r.xhr.abort(),r.xhr=null),r.cb=u,r.state=-1;break}}},p.prototype.requestHandler=function(){for(var e=0,t=0;t<a.length;t++){if(1!=a[t].state&&2!=a[t].state||e++,-1==a[t].state){s.debug("user cancel"),a[t].cb("user cancel"),a.splice(t,1);break}0!=a[t].state&&2!=a[t].state||e<6&&this.downloadPiece(a[t])}},p.prototype._removePiece=function(e){for(var t=!1,r=0;r<a.length;r++)if(a[r].piece==e){a.splice(r,1),t=!0;break}return t},p.prototype.getPiecesInfo=function(e){return this.cache.getLocalCachePieces(e)},p.prototype.downloadPieceByHttp=function(r){var n=this;r.state=1,r.xhr=i.get(r.url,function(e,t){if(0!=n._removePiece(r.piece)){if(e)return s.debug(e),r.cb(e);n.loadPieces++,n.cache&&n.cache.push(r.infoHash,r.piece,t.slice(0),"http",r.url),r.cb(null,t)}})},p.prototype.downloadPiece=function(r){var n=this;if(n.pieceLoad<=6||void 0===this.rtcloader||2==r.state)return n.pieceLoad++,s.debug("Use httploader player buffer:",n._getBufferTime(),n.pieceLoad,r.state),this.downloadPieceByHttp(r);r.state=1;s.debug("Use rtcloader player buffer,buffertime",n._getBufferTime(),"timeout",15e3),this.rtcloader.get(r.infoHash,r.piece,15e3,function(e,t){if(e)return s.debug(e),void(r.state=2);try{n.cache&&n.cache.push(r.infoHash,r.piece,t.slice(0),"rtc"),n.loadPieces++,1==n._removePiece(r.piece)?r.cb(null,t):s.error("pieceData callback by call????")}catch(e){s.debu("+++++++++++++++++",e),r.state=2}})},t.exports=p},{"./cache":1,"./httploader":4,"./log":5,"./player":34,"./rtcloader":35,"./version":38,extend:8,url:30}],3:[function(e,t,r){var n,i,c=e("./log").getLogger("connpool"),o=e("eventemitter3");function s(e,t){this.peer=e,this.pool={},this.opts=t}function u(e,t,r,n){this._conn=e,this.free=!1,this.infoHash=t,this.remotePeerId=r,o.call(this)}(n=u).super_=i=o,n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u.prototype.close=function(){c.debug(this.remotePeerId," release(free=true)"),this.free=!0,this.removeAllListeners()},u.prototype.send=function(e){this.lastRequestAt=new Date,c.debug("send data to ",this.remotePeerId),this._conn.send(e)},s.prototype.getTotalConnection=function(){return Object.keys(this.pool).length},s.prototype.getTotalConnectPeer=function(){var e={};for(var t in this.pool)e[this.pool[t].remotePeerId]=1;return Object.keys(e).length},s.prototype.create=function(e,i,t){var r=this,n=this.peer.connect(i);if(n){var o=e+i+(new Date).getTime(),s=new u(n,e,i,t),a=setTimeout(function(){s.emit("error","connect ",i,"timeout"),r.pool[o]&&delete r.pool[o]},t);return n.on("open",function(){a&&(clearTimeout(a),a=null),s.emit("open",s),r.pool[o]||(r.pool[o]=s)}),n.on("close",function(){c.debug("peer connect close ",i),r.pool[o]&&delete r.pool[o]}),n.on("data",function(e){var t=e.length?e.length:e.byteLength;if(c.debug("got data",t),s.lastRequestAt){var r=(new Date).getTime()-s.lastRequestAt.getTime(),n=parseInt(t/r*1e3/1024);s.speed=n,c.debug("request spent time:",r," speed:",n,"KB from ",i)}1==s.free&&c.error("connection is free. ondata?"),s.emit("data",e)}),n.on("error",function(e){c.debug("connect error",e,i),r.pool[o]&&delete r.pool[o],s.emit("error",e,i)}),s}c.debug("connect to ",i,"failed.")},s.prototype.getFreeConnectionByHash=function(e){var t=[];for(var r in this.pool)this.pool[r].infoHash==e&&1==this.pool[r].free&&t.push(this.pool[r].remotePeerId);return t},s.prototype.destroyConnectoinByPeer=function(e){var t=[];for(var r in this.pool)this.pool[r].infoHash==infoHash&&1==this.pool[r].free&&t.push(this.pool[r].remotePeerId);return t},s.prototype.getConnection=function(e,t,r){var n,i=this;for(var o in i.pool)if(i.pool[o].infoHash==e&&1==i.pool[o].free&&i.pool[o].remotePeerId==t){(n=i.pool[o]).free=!1,c.debug("get connection from pool",n.remotePeerId),setTimeout(function(){n.emit("open",n)},50);break}return n},t.exports=s},{"./log":5,eventemitter3:7}],4:[function(e,t,r){var p=e("./log").getLogger("httploader"),n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var i=window,f=i.performance,o=i.XMLHttpRequest,s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return n(t,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:f.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var t=void 0,r=this.context;t=this.loader=new o;var e=this.stats;e.tfirst=0,e.loaded=0;var n=this.xhrSetup;try{if(n)try{n(t,r.url)}catch(e){t.open("GET",r.url,!0),n(t,r.url)}t.readyState||t.open("GET",r.url,!0)}catch(e){return void this.callbacks.onError({code:t.status,text:e.message},r,t)}r.rangeEnd&&t.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=r.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,i=this.context,o=this.config;if(!n.aborted&&2<=r)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(f.now(),n.trequest)),4===r){var s=t.status;if(200<=s&&s<300){n.tload=Math.max(n.tfirst,f.now());var a=void 0,c=void 0;c="arraybuffer"===i.responseType?(a=t.response).byteLength:(a=t.responseText).length,n.loaded=n.total=c;var u={url:t.responseURL,data:a};this.callbacks.onSuccess(u,n,i,t)}else n.retry>=o.maxRetry||400<=s&&s<499?(p.debug(s+" while loading "+i.url),this.callbacks.onError({code:s,text:t.statusText},i,t)):(p.debug(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout,t)}},{key:"loadtimeout",value:function(e){e&&(p.debug("time kill xhr"),e.abort()),p.debug("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)}},{key:"loadprogress",value:function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)}}]),t}();t.exports={get:function(e,t){var r={onSuccess:function(e){t(null,e.data)},onError:function(e){t(e.text)},onTimeout:function(e){t("timeout")}},n=new s;return n.load({url:e,responseType:"arraybuffer"},{maxRetry:5,retryDelay:2e3,timeout:15e3},r),n}}},{"./log":5}],5:[function(e,r,a){(function(t){var i=e("util").format;var o="\n";"win32"==t.platform&&(o="\r\n");var s=a=r.exports=function(e,t){"string"==typeof e&&(e=a[e.toUpperCase()]),this.level=isFinite(e)?e:this.DEBUG,this.name=t};a.EMERGENCY=0,a.ALERT=1,a.CRITICAL=2,a.ERROR=3,a.WARNING=4,a.WARN=4,a.NOTICE=5,a.INFO=6,a.DEBUG=7,s.level="DEBUG",s.getLogger=function(e){return new s(s.level,e)};s.prototype={log:function(e,t){if(a[e]<=a[s.level]){var r=i.apply(null,t),n="["+(new Date).toLocaleTimeString()+"] "+e+" "+this.name;console.log(n+" "+r+o)}},emergency:function(e){this.log("EMERGENCY",arguments)},alert:function(e){this.log("ALERT",arguments)},critical:function(e){this.log("CRITICAL",arguments)},error:function(e){this.log("ERROR",arguments)},warning:function(e){this.log("WARNING",arguments)},warn:function(e){this.log("WARNING",arguments)},notice:function(e){this.log("NOTICE",arguments)},info:function(e){this.log("INFO",arguments)},debug:function(e){this.log("DEBUG",arguments)},pdebug:function(e){t.env.DEBUG&&this.log("DEBUG",arguments)}}}).call(this,e("_process"))},{_process:21,util:33}],6:[function(e,r,t){(function(e){var ke=function(){var c=3,u="function"==typeof e?e:setTimeout,s=4294967296,l=[4294967295,-s],a=[0,-0x8000000000000000],w=[0,0],S=[1,0];function m(e){var t=[];return t[e-1]=void 0,t}function k(e,t){return n(e[0]+t[0],e[1]+t[1])}function p(e,t){return function(e,t){var r;(r=t)<0&&(r+=s);return[r,e*s]}(~~Math.max(Math.min(e[1]/s,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/s,2147483647),-2147483648),B(e)&B(t))}function P(e,t){var r,n;return e[0]==t[0]&&e[1]==t[1]?0:(r=e[1]<0,n=t[1]<0,r&&!n?-1:!r&&n?1:T(e,t)[1]<0?-1:1)}function n(e,t){var r,n;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(r=t%s)+(n=Math.floor(e/s)*s),e=e-n+r;e<0;)e+=s,t-=s;for(;4294967295<e;)e-=s,t+=s;for(t%=0x10000000000000000;0x7fffffff00000000<t;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function E(e,t){return e[0]==t[0]&&e[1]==t[1]}function C(e){return 0<=e?[e,0]:[e+s,-s]}function B(e){return 2147483648<=e[0]?~~Math.max(Math.min(e[0]-s,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function f(e){return e<=30?1<<e:f(30)*f(e-30)}function h(e,t){var r,n,i,o;if(t&=63,E(e,a))return t?w:e;if(e[1]<0)throw new Error("Neg");return o=f(t),n=e[1]*o%0x10000000000000000,0x8000000000000000<=(n+=r=(i=e[0]*o)-i%s)&&(n-=0x10000000000000000),[i-=r,n]}function d(e,t){var r;return r=f(t&=63),n(Math.floor(e[0]/r),e[1]/r)}function T(e,t){return n(e[0]-t[0],e[1]-t[1])}function _(e){var t=e.buf;return t.length=e.count,t}function g(e,t){e.buf[e.count++]=t<<24>>24}function y(e,t,r,n,i){for(var o=0;o<i;++o)r[n+o]=e[t+o]}function v(e,t,r,n,i){var o,s,a,c,u,p,f,h;if(P(n,l)<0)throw new Error("invalid length "+n);for(e.length_0=n,o=function(e){var t;for(e._repDistances=m(4),e._optimum=[],e._rangeEncoder={},e._isMatch=m(192),e._isRep=m(12),e._isRepG0=m(12),e._isRepG1=m(12),e._isRepG2=m(12),e._isRep0Long=m(192),e._posSlotEncoder=[],e._posEncoders=m(114),e._posAlignEncoder=Y({},4),e._lenEncoder=X({}),e._repMatchLenEncoder=X({}),e._literalEncoder={},e._matchDistances=[],e._posSlotPrices=[],e._distancesPrices=[],e._alignPrices=m(16),e.reps=m(4),e.repLens=m(4),e.processedInSize=[w],e.processedOutSize=[w],e.finished=[0],e.properties=m(5),e.tempPrices=m(128),e._longestMatchLength=0,e._matchFinderType=1,e._numDistancePairs=0,e._numFastBytesPrev=-1,e.backRes=0,t=0;t<4096;++t)e._optimum[t]={};for(t=0;t<4;++t)e._posSlotEncoder[t]=Y({},6);return e}({}),function(e,t){e._dictionarySize=t;for(var r=0;1<<r<t;++r);e._distTableSize=2*r}(c=o,1<<(a=i).s),c._numFastBytes=a.f,u=c,p=a.m,f=u._matchFinderType,u._matchFinderType=p,u._matchFinder&&f!=u._matchFinderType&&(u._dictionarySizePrev=-1,u._matchFinder=null),c._numLiteralPosStateBits=0,c._numLiteralContextBits=3,c._posStateBits=2,c._posStateMask=3,o._writeEndMark=void 0===ke.disableEndMark,function(e,t){e.properties[0]=9*(5*e._posStateBits+e._numLiteralPosStateBits)+e._numLiteralContextBits<<24>>24;for(var r=0;r<4;++r)e.properties[1+r]=e._dictionarySize>>8*r<<24>>24;n=t,i=e.properties,o=0,s=5,y(i,o,n.buf,n.count,s),n.count+=s;var n,i,o,s}(o,r),s=0;s<64;s+=8)g(r,255&B(d(n,s)));e.chunker=(o._needReleaseMFStream=0,o._inStream=t,o._finished=0,function(e){var t,r;e._matchFinder||(t={},r=4,e._matchFinderType||(r=2),(n=t).HASH_ARRAY=2<r,n.HASH_ARRAY?(n.kNumHashDirectBytes=0,n.kMinMatchCheck=4,n.kFixHashSize=66560):(n.kNumHashDirectBytes=2,n.kMinMatchCheck=3,n.kFixHashSize=0),e._matchFinder=t);var n;if(function(e,t,r){var n,i;if(null==e.m_Coders||e.m_NumPrevBits!=r||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=r,i=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=m(i),n=0;n<i;++n)e.m_Coders[n]=J({})}(e._literalEncoder,e._numLiteralPosStateBits,e._numLiteralContextBits),e._dictionarySize==e._dictionarySizePrev&&e._numFastBytesPrev==e._numFastBytes)return;u=e._matchFinder,p=e._dictionarySize,f=4096,h=e._numFastBytes,l=274,p<1073741567&&(u._cutValue=16+(h>>1),i=u,o=p+f,s=h+l,a=256+~~((p+f+h+l)/2),i._keepSizeBefore=o,i._keepSizeAfter=s,c=o+s+a,(null==i._bufferBase||i._blockSize!=c)&&(i._bufferBase=null,i._blockSize=c,i._bufferBase=m(i._blockSize)),i._pointerToLastSafePosition=i._blockSize-s,u._matchMaxLen=h,d=p+1,u._cyclicBufferSize!=d&&(u._son=m(2*(u._cyclicBufferSize=d))),_=65536,u.HASH_ARRAY&&(_=p-1,_|=_>>1,_|=_>>2,_|=_>>4,_|=_>>8,_>>=1,16777216<(_|=65535)&&(_>>=1),u._hashMask=_,++_,_+=u.kFixHashSize),_!=u._hashSizeSum&&(u._hash=m(u._hashSizeSum=_))),e._dictionarySizePrev=e._dictionarySize,e._numFastBytesPrev=e._numFastBytes;var i,o,s,a,c;var u,p,f,h,l,d,_}(o),o._rangeEncoder.Stream=r,function(e){(function(e){e._state=0;for(var t=e._previousByte=0;t<4;++t)e._repDistances[t]=0})(e),t=e._rangeEncoder,t._position=w,t.Low=w,t.Range=-1,t._cacheSize=1,t._cache=0,de(e._isMatch),de(e._isRep0Long),de(e._isRep),de(e._isRepG0),de(e._isRepG1),de(e._isRepG2),de(e._posEncoders),function(e){var t,r=1<<e.m_NumPrevBits+e.m_NumPosBits;for(t=0;t<r;++t)de(e.m_Coders[t].m_Encoders)}(e._literalEncoder);var t;for(var r=0;r<4;++r)de(e._posSlotEncoder[r].Models);F(e._lenEncoder,1<<e._posStateBits),F(e._repMatchLenEncoder,1<<e._posStateBits),de(e._posAlignEncoder.Models),e._longestMatchWasFound=0,e._optimumEndIndex=0,e._optimumCurrentIndex=0,e._additionalOffset=0}(o),L(o),M(o),o._lenEncoder._tableSize=o._numFastBytes+1-2,G(o._lenEncoder,1<<o._posStateBits),o._repMatchLenEncoder._tableSize=o._numFastBytes+1-2,G(o._repMatchLenEncoder,1<<o._posStateBits),o.nowPos64=w,(h={}).encoder=o,h.decoder=null,h.alive=1,h)}function b(e,t,r){var n,i,o;return e.output=((n={}).buf=m(32),n.count=0,n),v(e,((i={}).buf=o=t,i.pos=0,i.count=o.length,i),e.output,C(t.length),r),e}function $(e,t){return e._bufferBase[e._bufferOffset+e._pos+t]}function Z(e,t,r,n){var i,o;for(e._streamEndWasReached&&e._pos+t+n>e._streamPos&&(n=e._streamPos-(e._pos+t)),++r,o=e._bufferOffset+e._pos+t,i=0;i<n&&e._bufferBase[o+i]==e._bufferBase[o+i-r];++i);return i}function K(e){return e._streamPos-e._pos}function R(e){var t,r,n,i,o,s;if(!e._streamEndWasReached)for(;;){if(!(r=-e._bufferOffset+e._blockSize-e._streamPos))return;if(n=e._stream,i=e._bufferBase,o=e._bufferOffset+e._streamPos,s=r,-1==(t=n.pos>=n.count?-1:(s=Math.min(s,n.count-n.pos),y(n.buf,n.pos,i,o,s),n.pos+=s,s)))return e._posLimit=e._streamPos,e._bufferOffset+e._posLimit>e._pointerToLastSafePosition&&(e._posLimit=e._pointerToLastSafePosition-e._bufferOffset),void(e._streamEndWasReached=1);e._streamPos+=t,e._streamPos>=e._pos+e._keepSizeAfter&&(e._posLimit=e._streamPos-e._keepSizeAfter)}}function x(e,t){e._bufferOffset+=t,e._posLimit-=t,e._pos-=t,e._streamPos-=t}var I=function(){var e,t,r,n=[];for(e=0;e<256;++e){for(r=e,t=0;t<8;++t)0!=(1&r)?r=r>>>1^-306674912:r>>>=1;n[e]=r}return n}();function D(e){var t,r;++e._cyclicBufferPos>=e._cyclicBufferSize&&(e._cyclicBufferPos=0),++(r=e)._pos,r._pos>r._posLimit&&(r._bufferOffset+r._pos>r._pointerToLastSafePosition&&function(e){var t,r,n;for(0<(n=e._bufferOffset+e._pos-e._keepSizeBefore)&&--n,r=e._bufferOffset+e._streamPos-n,t=0;t<r;++t)e._bufferBase[t]=e._bufferBase[n+t];e._bufferOffset-=n}(r),R(r)),1073741823==e._pos&&(t=e._pos-e._cyclicBufferSize,i(e._son,2*e._cyclicBufferSize,t),i(e._hash,e._hashSizeSum,t),x(e,t))}function i(e,t,r){var n,i;for(n=0;n<t;++n)(i=e[n]||0)<=r?i=0:i-=r,e[n]=i}function A(e){return(e-=2)<4?e:3}function Q(e){return e<4?0:e<10?e-3:e-6}function O(e){if(!e.alive)throw new Error("bad state");if(!e.encoder)throw new Error("No decoding");var t,r;return function(e,t,r,n){var i,o,s,a,c,u,p,f,h,l,d,_,m,g,y,v;if(t[0]=w,r[0]=w,n[0]=1,e._inStream&&(e._matchFinder._stream=e._inStream,(v=e._matchFinder)._bufferOffset=0,v._pos=0,v._streamPos=0,v._streamEndWasReached=0,R(v),v._cyclicBufferPos=0,x(v,-1),e._needReleaseMFStream=1,e._inStream=null),!e._finished){if(e._finished=1,g=e.nowPos64,E(e.nowPos64,w)){if(!K(e._matchFinder))return H(e,B(e.nowPos64));ie(e),m=B(e.nowPos64)&e._posStateMask,me(e._rangeEncoder,e._isMatch,(e._state<<4)+m,0),e._state=Q(e._state),s=$(e._matchFinder,-e._additionalOffset),V(se(e._literalEncoder,B(e.nowPos64),e._previousByte),e._rangeEncoder,s),e._previousByte=s,--e._additionalOffset,e.nowPos64=k(e.nowPos64,S)}if(!K(e._matchFinder))return H(e,B(e.nowPos64));for(;;){if(p=N(e,B(e.nowPos64)),l=e.backRes,m=B(e.nowPos64)&e._posStateMask,o=(e._state<<4)+m,1==p&&-1==l)me(e._rangeEncoder,e._isMatch,o,0),s=$(e._matchFinder,-e._additionalOffset),y=se(e._literalEncoder,B(e.nowPos64),e._previousByte),e._state<7?V(y,e._rangeEncoder,s):(h=$(e._matchFinder,-e._repDistances[0]-1-e._additionalOffset),W(y,e._rangeEncoder,h,s)),e._previousByte=s,e._state=Q(e._state);else{if(me(e._rangeEncoder,e._isMatch,o,1),l<4){if(me(e._rangeEncoder,e._isRep,e._state,1),l?(me(e._rangeEncoder,e._isRepG0,e._state,1),1==l?me(e._rangeEncoder,e._isRepG1,e._state,0):(me(e._rangeEncoder,e._isRepG1,e._state,1),me(e._rangeEncoder,e._isRepG2,e._state,l-2))):(me(e._rangeEncoder,e._isRepG0,e._state,0),me(e._rangeEncoder,e._isRep0Long,o,1==p?0:1)),1==p?e._state=e._state<7?9:11:(U(e._repMatchLenEncoder,e._rangeEncoder,p-2,m),e._state=e._state<7?8:11),a=e._repDistances[l],0!=l){for(u=l;1<=u;--u)e._repDistances[u]=e._repDistances[u-1];e._repDistances[0]=a}}else{for(me(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,U(e._lenEncoder,e._rangeEncoder,p-2,m),_=q(l-=4),f=A(p),ue(e._posSlotEncoder[f],e._rangeEncoder,_),4<=_&&(d=l-(i=(2|1&_)<<(c=(_>>1)-1)),_<14?he(e._posEncoders,i-_-1,e._rangeEncoder,c,d):(ge(e._rangeEncoder,d>>4,c-4),fe(e._posAlignEncoder,e._rangeEncoder,15&d),++e._alignPriceCount)),a=l,u=3;1<=u;--u)e._repDistances[u]=e._repDistances[u-1];e._repDistances[0]=a,++e._matchPriceCount}e._previousByte=$(e._matchFinder,p-1-e._additionalOffset)}if(e._additionalOffset-=p,e.nowPos64=k(e.nowPos64,C(p)),!e._additionalOffset){if(128<=e._matchPriceCount&&L(e),16<=e._alignPriceCount&&M(e),t[0]=e.nowPos64,r[0]=k(k(C((b=e._rangeEncoder)._cacheSize),b._position),[4,0]),!K(e._matchFinder))return H(e,B(e.nowPos64));if(0<=P(T(e.nowPos64,g),[4096,0]))return e._finished=0,n[0]=0}}var b}}((t=e).encoder,t.encoder.processedInSize,t.encoder.processedOutSize,t.encoder.finished),t.inBytesProcessed=t.encoder.processedInSize[0],t.encoder.finished[0]&&(z(r=t.encoder),r._rangeEncoder.Stream=null,t.alive=0),e.alive}var o=function(){var e,t,r,n=2,i=[0,1];for(r=2;r<22;++r)for(t=1<<(r>>1)-1,e=0;e<t;++e,++n)i[n]=r<<24>>24;return i}();function ee(e,t){var r,n,i,o;for(e._optimumEndIndex=t,i=e._optimum[t].PosPrev,n=e._optimum[t].BackPrev;e._optimum[t].Prev1IsChar&&(ce(e._optimum[i]),e._optimum[i].PosPrev=i-1,e._optimum[t].Prev2&&(e._optimum[i-1].Prev1IsChar=0,e._optimum[i-1].PosPrev=e._optimum[t].PosPrev2,e._optimum[i-1].BackPrev=e._optimum[t].BackPrev2)),o=i,r=n,n=e._optimum[o].BackPrev,i=e._optimum[o].PosPrev,e._optimum[o].BackPrev=r,e._optimum[o].PosPrev=t,0<(t=o););return e.backRes=e._optimum[0].BackPrev,e._optimumCurrentIndex=e._optimum[0].PosPrev,e._optimumCurrentIndex}function M(e){for(var t=0;t<16;++t)e._alignPrices[t]=r(e._posAlignEncoder,t);e._alignPriceCount=0}function L(e){var t,r,n,i,o,s,a,c;for(i=4;i<128;++i)t=(2|1&(s=q(i)))<<(n=(s>>1)-1),e.tempPrices[i]=le(e._posEncoders,t-s-1,n,i-t);for(o=0;o<4;++o){for(r=e._posSlotEncoder[o],a=o<<6,s=0;s<e._distTableSize;++s)e._posSlotPrices[a+s]=pe(r,s);for(s=14;s<e._distTableSize;++s)e._posSlotPrices[a+s]+=(s>>1)-1-4<<6;for(c=128*o,i=0;i<4;++i)e._distancesPrices[c+i]=e._posSlotPrices[a+i];for(;i<128;++i)e._distancesPrices[c+i]=e._posSlotPrices[a+q(i)]+e.tempPrices[i]}e._matchPriceCount=0}function H(e,t){z(e),function(e,t){if(!e._writeEndMark)return;me(e._rangeEncoder,e._isMatch,(e._state<<4)+t,1),me(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,U(e._lenEncoder,e._rangeEncoder,0,t);var r=A(2);ue(e._posSlotEncoder[r],e._rangeEncoder,63),ge(e._rangeEncoder,67108863,26),fe(e._posAlignEncoder,e._rangeEncoder,15)}(e,t&e._posStateMask);for(var r=0;r<5;++r)ye(e._rangeEncoder)}function N(e,t){var r,n,i,o,s,a,c,u,p,f,h,l,d,_,m,g,y,v,b,w,S,k,P,E,C,B,T,R,x,I,D,A,O,M,L,H,N,z,q,F,j,U,X,G,V,W,J,Y;if(e._optimumEndIndex!=e._optimumCurrentIndex)return d=e._optimum[e._optimumCurrentIndex].PosPrev-e._optimumCurrentIndex,e.backRes=e._optimum[e._optimumCurrentIndex].BackPrev,e._optimumCurrentIndex=e._optimum[e._optimumCurrentIndex].PosPrev,d;if(e._optimumCurrentIndex=e._optimumEndIndex=0,e._longestMatchWasFound?(l=e._longestMatchLength,e._longestMatchWasFound=0):l=ie(e),B=e._numDistancePairs,(E=K(e._matchFinder)+1)<2)return e.backRes=-1,1;for(273<E&&(E=273),p=q=0;p<4;++p)e.reps[p]=e._repDistances[p],e.repLens[p]=Z(e._matchFinder,-1,e.reps[p],273),e.repLens[p]>e.repLens[q]&&(q=p);if(e.repLens[q]>=e._numFastBytes)return e.backRes=q,ne(e,(d=e.repLens[q])-1),d;if(l>=e._numFastBytes)return e.backRes=e._matchDistances[B-1]+4,ne(e,l-1),l;if(c=$(e._matchFinder,-1),y=$(e._matchFinder,-e._repDistances[0]-1-1),l<2&&c!=y&&e.repLens[q]<2)return e.backRes=-1,1;if(e._optimum[0].State=e._state,O=t&e._posStateMask,e._optimum[1].Price=_e[e._isMatch[(e._state<<4)+O]>>>2]+ae(se(e._literalEncoder,t,e._previousByte),7<=e._state,y,c),ce(e._optimum[1]),z=(v=_e[2048-e._isMatch[(e._state<<4)+O]>>>2])+_e[2048-e._isRep[e._state]>>>2],y==c&&(F=z+(J=(W=e)._state,Y=O,_e[W._isRepG0[J]>>>2]+_e[W._isRep0Long[(J<<4)+Y]>>>2]))<e._optimum[1].Price&&(e._optimum[1].Price=F,(V=e._optimum[1]).BackPrev=0,V.Prev1IsChar=0),(h=l>=e.repLens[q]?l:e.repLens[q])<2)return e.backRes=e._optimum[1].BackPrev,1;for(e._optimum[1].PosPrev=0,e._optimum[0].Backs0=e.reps[0],e._optimum[0].Backs1=e.reps[1],e._optimum[0].Backs2=e.reps[2],e._optimum[0].Backs3=e.reps[3],f=h;e._optimum[f--].Price=268435455,2<=f;);for(p=0;p<4;++p)if(!((N=e.repLens[p])<2))for(L=z+re(e,p,e._state,O);(o=L+oe(e._repMatchLenEncoder,N-2,O))<(I=e._optimum[N]).Price&&(I.Price=o,I.PosPrev=0,I.BackPrev=p,I.Prev1IsChar=0),2<=--N;);if(P=v+_e[e._isRep[e._state]>>>2],(f=2<=e.repLens[0]?e.repLens[0]+1:2)<=l){for(T=0;f>e._matchDistances[T];)T+=2;for(;(o=P+te(e,u=e._matchDistances[T+1],f,O))<(I=e._optimum[f]).Price&&(I.Price=o,I.PosPrev=0,I.BackPrev=u+4,I.Prev1IsChar=0),f!=e._matchDistances[T]||(T+=2)!=B;++f);}for(r=0;;){if(++r==h)return ee(e,r);if(b=ie(e),B=e._numDistancePairs,b>=e._numFastBytes)return e._longestMatchLength=b,e._longestMatchWasFound=1,ee(e,r);if(++t,A=e._optimum[r].PosPrev,e._optimum[r].Prev1IsChar?(--A,e._optimum[r].Prev2?(U=e._optimum[e._optimum[r].PosPrev2].State,U=e._optimum[r].BackPrev2<4?U<7?8:11:U<7?7:10):U=e._optimum[A].State,U=Q(U)):U=e._optimum[A].State,A==r-1?U=e._optimum[r].BackPrev?Q(U):U<7?9:11:(e._optimum[r].Prev1IsChar&&e._optimum[r].Prev2?(A=e._optimum[r].PosPrev2,D=e._optimum[r].BackPrev2,U=U<7?8:11):U=(D=e._optimum[r].BackPrev)<4?U<7?8:11:U<7?7:10,x=e._optimum[A],D<4?D?1==D?(e.reps[0]=x.Backs1,e.reps[1]=x.Backs0,e.reps[2]=x.Backs2,e.reps[3]=x.Backs3):2==D?(e.reps[0]=x.Backs2,e.reps[1]=x.Backs0,e.reps[2]=x.Backs1,e.reps[3]=x.Backs3):(e.reps[0]=x.Backs3,e.reps[1]=x.Backs0,e.reps[2]=x.Backs1,e.reps[3]=x.Backs2):(e.reps[0]=x.Backs0,e.reps[1]=x.Backs1,e.reps[2]=x.Backs2,e.reps[3]=x.Backs3):(e.reps[0]=D-4,e.reps[1]=x.Backs0,e.reps[2]=x.Backs1,e.reps[3]=x.Backs2)),e._optimum[r].State=U,e._optimum[r].Backs0=e.reps[0],e._optimum[r].Backs1=e.reps[1],e._optimum[r].Backs2=e.reps[2],e._optimum[r].Backs3=e.reps[3],a=e._optimum[r].Price,c=$(e._matchFinder,-1),y=$(e._matchFinder,-e.reps[0]-1-1),O=t&e._posStateMask,w=0,(n=a+_e[e._isMatch[(U<<4)+O]>>>2]+ae(se(e._literalEncoder,t,$(e._matchFinder,-2)),7<=U,y,c))<(S=e._optimum[r+1]).Price&&(S.Price=n,S.PosPrev=r,S.BackPrev=-1,S.Prev1IsChar=0,w=1),z=(v=a+_e[2048-e._isMatch[(U<<4)+O]>>>2])+_e[2048-e._isRep[U]>>>2],y!=c||S.PosPrev<r&&!S.BackPrev||(F=z+(_e[e._isRepG0[U]>>>2]+_e[e._isRep0Long[(U<<4)+O]>>>2]))<=S.Price&&(S.Price=F,S.PosPrev=r,S.BackPrev=0,S.Prev1IsChar=0,w=1),!((E=C=4095-r<(C=K(e._matchFinder)+1)?4095-r:C)<2)){if(E>e._numFastBytes&&(E=e._numFastBytes),!w&&y!=c&&(G=Math.min(C-1,e._numFastBytes),2<=(m=Z(e._matchFinder,0,e.reps[0],G)))){for(X=Q(U),M=t+1&e._posStateMask,k=n+_e[2048-e._isMatch[(X<<4)+M]>>>2]+_e[2048-e._isRep[X]>>>2],R=r+1+m;h<R;)e._optimum[++h].Price=268435455;(o=k+(oe(e._repMatchLenEncoder,m-2,M)+re(e,0,X,M)))<(I=e._optimum[R]).Price&&(I.Price=o,I.PosPrev=r+1,I.BackPrev=0,I.Prev1IsChar=1,I.Prev2=0)}for(j=2,H=0;H<4;++H)if(!((_=Z(e._matchFinder,-1,e.reps[H],E))<2)){g=_;do{for(;h<r+_;)e._optimum[++h].Price=268435455;(o=z+(oe(e._repMatchLenEncoder,_-2,O)+re(e,H,U,O)))<(I=e._optimum[r+_]).Price&&(I.Price=o,I.PosPrev=r,I.BackPrev=H,I.Prev1IsChar=0)}while(2<=--_);if(_=g,H||(j=_+1),_<C&&(G=Math.min(C-1-_,e._numFastBytes),2<=(m=Z(e._matchFinder,_,e.reps[H],G)))){for(X=U<7?8:11,M=t+_&e._posStateMask,i=z+(oe(e._repMatchLenEncoder,_-2,O)+re(e,H,U,O))+_e[e._isMatch[(X<<4)+M]>>>2]+ae(se(e._literalEncoder,t+_,$(e._matchFinder,_-1-1)),1,$(e._matchFinder,_-1-(e.reps[H]+1)),$(e._matchFinder,_-1)),X=Q(X),M=t+_+1&e._posStateMask,k=i+_e[2048-e._isMatch[(X<<4)+M]>>>2]+_e[2048-e._isRep[X]>>>2],R=_+1+m;h<r+R;)e._optimum[++h].Price=268435455;(o=k+(oe(e._repMatchLenEncoder,m-2,M)+re(e,0,X,M)))<(I=e._optimum[r+R]).Price&&(I.Price=o,I.PosPrev=r+_+1,I.BackPrev=0,I.Prev1IsChar=1,I.Prev2=1,I.PosPrev2=r,I.BackPrev2=H)}}if(E<b){for(b=E,B=0;b>e._matchDistances[B];B+=2);e._matchDistances[B]=b,B+=2}if(j<=b){for(P=v+_e[e._isRep[U]>>>2];h<r+b;)e._optimum[++h].Price=268435455;for(T=0;j>e._matchDistances[T];)T+=2;for(_=j;;++_)if((o=P+te(e,s=e._matchDistances[T+1],_,O))<(I=e._optimum[r+_]).Price&&(I.Price=o,I.PosPrev=r,I.BackPrev=s+4,I.Prev1IsChar=0),_==e._matchDistances[T]){if(_<C&&(G=Math.min(C-1-_,e._numFastBytes),2<=(m=Z(e._matchFinder,_,s,G)))){for(X=U<7?7:10,M=t+_&e._posStateMask,i=o+_e[e._isMatch[(X<<4)+M]>>>2]+ae(se(e._literalEncoder,t+_,$(e._matchFinder,_-1-1)),1,$(e._matchFinder,_-(s+1)-1),$(e._matchFinder,_-1)),X=Q(X),M=t+_+1&e._posStateMask,k=i+_e[2048-e._isMatch[(X<<4)+M]>>>2]+_e[2048-e._isRep[X]>>>2],R=_+1+m;h<r+R;)e._optimum[++h].Price=268435455;(o=k+(oe(e._repMatchLenEncoder,m-2,M)+re(e,0,X,M)))<(I=e._optimum[r+R]).Price&&(I.Price=o,I.PosPrev=r+_+1,I.BackPrev=0,I.Prev1IsChar=1,I.Prev2=1,I.PosPrev2=r,I.BackPrev2=s+4)}if((T+=2)==B)break}}}}}function te(e,t,r,n){var i=A(r);return(t<128?e._distancesPrices[128*i+t]:e._posSlotPrices[(i<<6)+function(e){if(e<131072)return o[e>>6]+12;if(e<134217728)return o[e>>16]+32;return o[e>>26]+52}(t)]+e._alignPrices[15&t])+oe(e._lenEncoder,r-2,n)}function re(e,t,r,n){var i;return t?(i=_e[2048-e._isRepG0[r]>>>2],1==t?i+=_e[e._isRepG1[r]>>>2]:(i+=_e[2048-e._isRepG1[r]>>>2],i+=ve(e._isRepG2[r],t-2))):(i=_e[e._isRepG0[r]>>>2],i+=_e[2048-e._isRep0Long[(r<<4)+n]>>>2]),i}function ne(e,t){0<t&&(!function(e,t){var r,n,i,o,s,a,c,u,p,f,h,l,d,_,m,g,y;do{if(e._pos+e._matchMaxLen<=e._streamPos)l=e._matchMaxLen;else if((l=e._streamPos-e._pos)<e.kMinMatchCheck){D(e);continue}for(d=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,n=e._bufferOffset+e._pos,e.HASH_ARRAY?(a=1023&(y=I[255&e._bufferBase[n]]^255&e._bufferBase[n+1]),e._hash[a]=e._pos,c=65535&(y^=(255&e._bufferBase[n+2])<<8),e._hash[1024+c]=e._pos,u=(y^I[255&e._bufferBase[n+3]]<<5)&e._hashMask):u=255&e._bufferBase[n]^(255&e._bufferBase[n+1])<<8,i=e._hash[e.kFixHashSize+u],e._hash[e.kFixHashSize+u]=e._pos,m=1+(e._cyclicBufferPos<<1),g=e._cyclicBufferPos<<1,f=h=e.kNumHashDirectBytes,r=e._cutValue;;){if(i<=d||0==r--){e._son[m]=e._son[g]=0;break}if(o=((s=e._pos-i)<=e._cyclicBufferPos?e._cyclicBufferPos-s:e._cyclicBufferPos-s+e._cyclicBufferSize)<<1,_=e._bufferOffset+i,p=f<h?f:h,e._bufferBase[_+p]==e._bufferBase[n+p]){for(;++p!=l&&e._bufferBase[_+p]==e._bufferBase[n+p];);if(p==l){e._son[g]=e._son[o],e._son[m]=e._son[o+1];break}}(255&e._bufferBase[_+p])<(255&e._bufferBase[n+p])?(e._son[g]=i,g=o+1,i=e._son[g],h=p):(e._son[m]=i,m=o,i=e._son[m],f=p)}D(e)}while(0!=--t)}(e._matchFinder,t),e._additionalOffset+=t)}function ie(e){var t=0;return e._numDistancePairs=function(e,t){var r,n,i,o,s,a,c,u,p,f,h,l,d,_,m,g,y,v,b,w,S;if(e._pos+e._matchMaxLen<=e._streamPos)_=e._matchMaxLen;else if((_=e._streamPos-e._pos)<e.kMinMatchCheck)return D(e),0;for(y=0,m=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,n=e._bufferOffset+e._pos,g=1,p=u=0,e.HASH_ARRAY?(u=1023&(S=I[255&e._bufferBase[n]]^255&e._bufferBase[n+1]),p=65535&(S^=(255&e._bufferBase[n+2])<<8),f=(S^I[255&e._bufferBase[n+3]]<<5)&e._hashMask):f=255&e._bufferBase[n]^(255&e._bufferBase[n+1])<<8,i=e._hash[e.kFixHashSize+f]||0,e.HASH_ARRAY&&(o=e._hash[u]||0,s=e._hash[1024+p]||0,e._hash[u]=e._pos,e._hash[1024+p]=e._pos,m<o&&e._bufferBase[e._bufferOffset+o]==e._bufferBase[n]&&(t[y++]=g=2,t[y++]=e._pos-o-1),m<s&&e._bufferBase[e._bufferOffset+s]==e._bufferBase[n]&&(s==o&&(y-=2),t[y++]=g=3,t[y++]=e._pos-s-1,o=s),0!=y&&o==i&&(y-=2,g=1)),e._hash[e.kFixHashSize+f]=e._pos,b=1+(e._cyclicBufferPos<<1),w=e._cyclicBufferPos<<1,l=d=e.kNumHashDirectBytes,0!=e.kNumHashDirectBytes&&m<i&&e._bufferBase[e._bufferOffset+i+e.kNumHashDirectBytes]!=e._bufferBase[n+e.kNumHashDirectBytes]&&(t[y++]=g=e.kNumHashDirectBytes,t[y++]=e._pos-i-1),r=e._cutValue;;){if(i<=m||0==r--){e._son[b]=e._son[w]=0;break}if(a=((c=e._pos-i)<=e._cyclicBufferPos?e._cyclicBufferPos-c:e._cyclicBufferPos-c+e._cyclicBufferSize)<<1,v=e._bufferOffset+i,h=l<d?l:d,e._bufferBase[v+h]==e._bufferBase[n+h]){for(;++h!=_&&e._bufferBase[v+h]==e._bufferBase[n+h];);if(g<h&&(t[y++]=g=h,t[y++]=c-1,h==_)){e._son[w]=e._son[a],e._son[b]=e._son[a+1];break}}(255&e._bufferBase[v+h])<(255&e._bufferBase[n+h])?(e._son[w]=i,w=a+1,i=e._son[w],d=h):(e._son[b]=i,b=a,i=e._son[b],l=h)}return D(e),y}(e._matchFinder,e._matchDistances),0<e._numDistancePairs&&(t=e._matchDistances[e._numDistancePairs-2])==e._numFastBytes&&(t+=Z(e._matchFinder,t-1,e._matchDistances[e._numDistancePairs-1],273-t)),++e._additionalOffset,t}function z(e){e._matchFinder&&e._needReleaseMFStream&&(e._matchFinder._stream=null,e._needReleaseMFStream=0)}function q(e){return e<2048?o[e]:e<2097152?o[e>>10]+20:o[e>>20]+40}function F(e,t){de(e._choice);for(var r=0;r<t;++r)de(e._lowCoder[r].Models),de(e._midCoder[r].Models);de(e._highCoder.Models)}function j(e,t,r,n,i){var o,s,a,c,u;for(o=_e[e._choice[0]>>>2],a=(s=_e[2048-e._choice[0]>>>2])+_e[e._choice[1]>>>2],c=s+_e[2048-e._choice[1]>>>2],u=u=0;u<8;++u){if(r<=u)return;n[i+u]=o+pe(e._lowCoder[t],u)}for(;u<16;++u){if(r<=u)return;n[i+u]=a+pe(e._midCoder[t],u-8)}for(;u<r;++u)n[i+u]=c+pe(e._highCoder,u-8-8)}function U(e,t,r,n){var i,o,s,a;i=e,o=t,a=n,(s=r)<8?(me(o,i._choice,0,0),ue(i._lowCoder[a],o,s)):(s-=8,me(o,i._choice,0,1),s<8?(me(o,i._choice,1,0),ue(i._midCoder[a],o,s)):(me(o,i._choice,1,1),ue(i._highCoder,o,s-8))),0==--e._counters[n]&&(j(e,n,e._tableSize,e._prices,272*n),e._counters[n]=e._tableSize)}function X(e){return function(e){e._choice=m(2),e._lowCoder=m(16),e._midCoder=m(16),e._highCoder=Y({},8);for(var t=0;t<16;++t)e._lowCoder[t]=Y({},3),e._midCoder[t]=Y({},3)}(e),e._prices=[],e._counters=[],e}function oe(e,t,r){return e._prices[272*r+t]}function G(e,t){for(var r=0;r<t;++r)j(e,r,e._tableSize,e._prices,272*r),e._counters[r]=e._tableSize}function se(e,t,r){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&r)>>>8-e.m_NumPrevBits)]}function V(e,t,r){var n,i,o=1;for(i=7;0<=i;--i)n=r>>i&1,me(t,e.m_Encoders,o,n),o=o<<1|n}function W(e,t,r,n){var i,o,s,a,c=1,u=1;for(o=7;0<=o;--o)i=n>>o&1,a=u,c&&(a+=1+(s=r>>o&1)<<8,c=s==i),me(t,e.m_Encoders,a,i),u=u<<1|i}function J(e){return e.m_Encoders=m(768),e}function ae(e,t,r,n){var i,o,s=1,a=7,c=0;if(t)for(;0<=a;--a)if(o=r>>a&1,i=n>>a&1,c+=ve(e.m_Encoders[(1+o<<8)+s],i),s=s<<1|i,o!=i){--a;break}for(;0<=a;--a)i=n>>a&1,c+=ve(e.m_Encoders[s],i),s=s<<1|i;return c}function ce(e){e.BackPrev=-1,e.Prev1IsChar=0}function Y(e,t){return e.NumBitLevels=t,e.Models=m(1<<t),e}function ue(e,t,r){var n,i,o=1;for(i=e.NumBitLevels;0!=i;)n=r>>>--i&1,me(t,e.Models,o,n),o=o<<1|n}function pe(e,t){var r,n,i=1,o=0;for(n=e.NumBitLevels;0!=n;)r=t>>>--n&1,o+=ve(e.Models[i],r),i=(i<<1)+r;return o}function fe(e,t,r){var n,i,o=1;for(i=0;i<e.NumBitLevels;++i)n=1&r,me(t,e.Models,o,n),o=o<<1|n,r>>=1}function r(e,t){var r,n,i=1,o=0;for(n=e.NumBitLevels;0!=n;--n)r=1&t,t>>>=1,o+=ve(e.Models[i],r),i=i<<1|r;return o}function he(e,t,r,n,i){var o,s,a=1;for(s=0;s<n;++s)me(r,e,t+a,o=1&i),a=a<<1|o,i>>=1}function le(e,t,r,n){var i,o,s=1,a=0;for(o=r;0!=o;--o)i=1&n,n>>>=1,a+=_e[(2047&(e[t+s]-i^-i))>>>2],s=s<<1|i;return a}function de(e){for(var t=e.length-1;0<=t;--t)e[t]=1024}var _e=function(){var e,t,r,n=[];for(t=8;0<=t;--t)for(e=1<<9-t,r=1<<9-t-1;r<e;++r)n[r]=(t<<6)+(e-r<<6>>>9-t-1);return n}();function me(e,t,r,n){var i,o=t[r];i=(e.Range>>>11)*o,n?(e.Low=k(e.Low,p(C(i),[4294967295,0])),e.Range-=i,t[r]=o-(o>>>5)<<16>>16):(e.Range=i,t[r]=o+(2048-o>>>5)<<16>>16),-16777216&e.Range||(e.Range<<=8,ye(e))}function ge(e,t,r){for(var n=r-1;0<=n;--n)e.Range>>>=1,1==(t>>>n&1)&&(e.Low=k(e.Low,C(e.Range))),-16777216&e.Range||(e.Range<<=8,ye(e))}function ye(e){var t,r,n,i,o=B((r=e.Low,n=32,i=d(r,n&=63),r[1]<0&&(i=k(i,h([2,0],63-n))),i));if(0!=o||P(e.Low,[4278190080,0])<0){for(e._position=k(e._position,C(e._cacheSize)),t=e._cache;g(e.Stream,t+o),t=255,0!=--e._cacheSize;);e._cache=B(e.Low)>>>24}++e._cacheSize,e.Low=h(p(e.Low,[16777215,0]),8)}function ve(e,t){return _e[(2047&(e-t^-t))>>>2]}function be(e){var t,r,n,i=[],o=0,s=e.length;if("object"==(void 0===e?"undefined":_typeof(e)))return e;for(function(e,t,r,n,i){var o;for(o=t;o<r;++o)n[i++]=e.charCodeAt(o)}(e,0,s,i,0),n=0;n<s;++n)1<=(t=i[n])&&t<=127?++o:o+=!t||128<=t&&t<=2047?2:3;for(r=[],n=o=0;n<s;++n)1<=(t=i[n])&&t<=127?r[o++]=t<<24>>24:(!t||128<=t&&t<=2047?r[o++]=(192|t>>6&31)<<24>>24:(r[o++]=(224|t>>12&15)<<24>>24,r[o++]=(128|t>>6&63)<<24>>24),r[o++]=(128|63&t)<<24>>24);return r}function we(e){return e[1]+e[0]}var t,Se=(t=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}],function(e){return t[e-1]||t[6]});return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||(onmessage=function(e){e&&e.data&&1==e.data.action&&ke.compress(e.data.data,e.data.mode,e.data.cbn)}),{compress:function(e,t,n,i){var o,r,s={},a=void 0===n&&void 0===i;if("function"!=typeof n&&(r=n,n=i=0),i=i||function(e){void 0===r||postMessage({action:c,cbn:r,result:e})},n=n||function(e,t){if(void 0!==r)return postMessage({action:1,cbn:r,result:e,error:t})},a){for(s.c=b({},be(e),Se(t));O(s.c.chunker););return _(s.c.output)}try{s.c=b({},be(e),Se(t)),i(0)}catch(e){return n(null,e)}u(function e(){try{for(var t,r=(new Date).getTime();O(s.c.chunker);)if(o=we(s.c.chunker.inBytesProcessed)/we(s.c.length_0),200<(new Date).getTime()-r)return i(o),u(e,0),0;i(1),t=_(s.c.output),u(n.bind(null,t),0)}catch(e){n(null,e)}},0)}}}(),t=function(){var n=3,p="function"==typeof e?e:setTimeout,i=4294967296,d=[4294967295,-i],_=[0,0],m=[1,0];function g(e){var t=[];return t[e-1]=void 0,t}function y(e,t){return s(e[0]+t[0],e[1]+t[1])}function v(e,t){var r,n,i,o;return e[0]==t[0]&&e[1]==t[1]?0:(r=e[1]<0,n=t[1]<0,r&&!n?-1:!r&&n?1:(i=e,o=t,s(i[0]-o[0],i[1]-o[1]))[1]<0?-1:1)}function s(e,t){var r,n;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(r=t%i)+(n=Math.floor(e/i)*i),e=e-n+r;e<0;)e+=i,t-=i;for(;4294967295<e;)e-=i,t+=i;for(t%=0x10000000000000000;0x7fffffff00000000<t;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function b(e){return 0<=e?[e,0]:[e+i,-i]}function w(e){return 2147483648<=e[0]?~~Math.max(Math.min(e[0]-i,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function S(e){return e.pos>=e.count?-1:255&e.buf[e.pos++]}function f(e){var t=e.buf;return t.length=e.count,t}function o(e,t,r){var n,i,o,s,a,c,u,p,f,h="",l=[];for(i=0;i<5;++i){if(-1==(o=S(t)))throw new Error("truncated input");l[i]=o<<24>>24}if(!function(e,t){var r,n,i,o,s,a,c;if(t.length<5)return 0;for(c=255&t[0],i=c%9,o=(a=~~(c/9))%5,s=~~(a/5),n=r=0;n<4;++n)r+=(255&t[1+n])<<8*n;if(99999999<r||!function(e,t,r,n){if(8<t||4<r||4<n)return 0;!function(e,t,r){var n,i;if(null!=e.m_Coders&&e.m_NumPrevBits==r&&e.m_NumPosBits==t)return;for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=r,i=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=g(i),n=0;n<i;++n)e.m_Coders[n]=x({})}(e.m_LiteralDecoder,r,t);var i=1<<n;return C(e.m_LenDecoder,i),C(e.m_RepLenDecoder,i),e.m_PosStateMask=i-1,1}(e,i,o,s))return 0;return function(e,t){if(t<0)return 0;e.m_DictionarySize!=t&&(e.m_DictionarySize=t,e.m_DictionarySizeCheck=Math.max(e.m_DictionarySize,1),function(e,t){null!=e._buffer&&e._windowSize==t||(e._buffer=g(t));e._windowSize=t,e._pos=0,e._streamPos=0}(e.m_OutWindow,Math.max(e.m_DictionarySizeCheck,4096)));return 1}(e,r)}(n=function(e){e.m_OutWindow={},e.m_RangeDecoder={},e.m_IsMatchDecoders=g(192),e.m_IsRepDecoders=g(12),e.m_IsRepG0Decoders=g(12),e.m_IsRepG1Decoders=g(12),e.m_IsRepG2Decoders=g(12),e.m_IsRep0LongDecoders=g(192),e.m_PosSlotDecoder=g(4),e.m_PosDecoders=g(114),e.m_PosAlignDecoder=I({},4),e.m_LenDecoder=T({}),e.m_RepLenDecoder=T({}),e.m_LiteralDecoder={};for(var t=0;t<4;++t)e.m_PosSlotDecoder[t]=I({},6);return e}({}),l))throw new Error("corrupted input");for(i=0;i<64;i+=8){if(-1==(o=S(t)))throw new Error("truncated input");1==(o=o.toString(16)).length&&(o="0"+o),h=o+""+h}/^0+$|^f+$/i.test(h)?e.length_0=d:(s=parseInt(h,16),e.length_0=4294967295<s?d:b(s)),e.chunker=(a=n,c=t,u=r,p=e.length_0,a.m_RangeDecoder.Stream=c,E(a.m_OutWindow),a.m_OutWindow._stream=u,function(e){e.m_OutWindow._streamPos=0,e.m_OutWindow._pos=0,O(e.m_IsMatchDecoders),O(e.m_IsRep0LongDecoders),O(e.m_IsRepDecoders),O(e.m_IsRepG0Decoders),O(e.m_IsRepG1Decoders),O(e.m_IsRepG2Decoders),O(e.m_PosDecoders),function(e){var t,r;for(r=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<r;++t)O(e.m_Coders[t].m_Decoders)}(e.m_LiteralDecoder);for(var t=0;t<4;++t)O(e.m_PosSlotDecoder[t].Models);R(e.m_LenDecoder),R(e.m_RepLenDecoder),O(e.m_PosAlignDecoder.Models),function(e){e.Code=0,e.Range=-1;for(var t=0;t<5;++t)e.Code=e.Code<<8|S(e.Stream)}(e.m_RangeDecoder)}(a),a.state=0,a.rep0=0,a.rep1=0,a.rep2=0,a.rep3=0,a.outSize=p,a.nowPos64=_,a.prevByte=0,(f={}).decoder=a,f.encoder=null,f.alive=1,f)}function h(e,t){var r,n,i;return e.output=((r={}).buf=g(32),r.count=0,r),o(e,((n={}).buf=i=t,n.pos=0,n.count=i.length,n),e.output),e}function k(e){var t,r,n,i,o=e._pos-e._streamPos;o&&(t=e._stream,r=e._buffer,n=e._streamPos,i=o,function(e,t,r,n,i){for(var o=0;o<i;++o)r[n+o]=e[t+o]}(r,n,t.buf,t.count,i),t.count+=i,e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function P(e,t){var r=e._pos-t-1;return r<0&&(r+=e._windowSize),e._buffer[r]}function E(e){k(e),e._stream=null}function l(e){if(!e.alive)throw new Error("bad state");if(e.encoder)throw new Error("No encoding");return function(e){var t=function(e){var t,r,n,i,o,s;if(s=w(e.nowPos64)&e.m_PosStateMask,A(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+s)){if(A(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))n=0,A(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?(A(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?(A(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?(r=e.rep3,e.rep3=e.rep2):r=e.rep2,e.rep2=e.rep1):r=e.rep1,e.rep1=e.rep0,e.rep0=r):A(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+s)||(e.state=e.state<7?9:11,n=1),n||(n=B(e.m_RepLenDecoder,e.m_RangeDecoder,s)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,n=2+B(e.m_LenDecoder,e.m_RangeDecoder,s),e.state=e.state<7?7:10,4<=(o=D(e.m_PosSlotDecoder[(a=n,(a-=2)<4?a:3)],e.m_RangeDecoder))){if(i=(o>>1)-1,e.rep0=(2|1&o)<<i,o<14)e.rep0+=function(e,t,r,n){var i,o,s=1,a=0;for(o=0;o<n;++o)i=A(r,e,t+s),s<<=1,s+=i,a|=i<<o;return a}(e.m_PosDecoders,e.rep0-o-1,e.m_RangeDecoder,i);else if(e.rep0+=function(e,t){var r,n,i=0;for(r=t;0!=r;--r)e.Range>>>=1,n=e.Code-e.Range>>>31,e.Code-=e.Range&n-1,i=i<<1|1-n,-16777216&e.Range||(e.Code=e.Code<<8|S(e.Stream),e.Range<<=8);return i}(e.m_RangeDecoder,i-4)<<4,e.rep0+=function(e,t){var r,n,i=1,o=0;for(n=0;n<e.NumBitLevels;++n)r=A(t,e.Models,i),i<<=1,i+=r,o|=r<<n;return o}(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return-1==e.rep0?1:-1}else e.rep0=o;if(0<=v(b(e.rep0),e.nowPos64)||e.rep0>=e.m_DictionarySizeCheck)return-1;!function(e,t,r){var n=e._pos-t-1;for(n<0&&(n+=e._windowSize);0!=r;--r)n>=e._windowSize&&(n=0),e._buffer[e._pos++]=e._buffer[n++],e._pos>=e._windowSize&&k(e)}(e.m_OutWindow,e.rep0,n),e.nowPos64=y(e.nowPos64,b(n)),e.prevByte=P(e.m_OutWindow,0)}else f=e.m_LiteralDecoder,h=w(e.nowPos64),l=e.prevByte,t=f.m_Coders[((h&f.m_PosMask)<<f.m_NumPrevBits)+((255&l)>>>8-f.m_NumPrevBits)],e.state<7?e.prevByte=function(e,t){var r=1;for(;r=r<<1|A(t,e.m_Decoders,r),r<256;);return r<<24>>24}(t,e.m_RangeDecoder):e.prevByte=function(e,t,r){var n,i,o=1;do{if(i=r>>7&1,r<<=1,n=A(t,e.m_Decoders,(1+i<<8)+o),o=o<<1|n,i!=n){for(;o<256;)o=o<<1|A(t,e.m_Decoders,o);break}}while(o<256);return o<<24>>24}(t,e.m_RangeDecoder,P(e.m_OutWindow,e.rep0)),u=e.m_OutWindow,p=e.prevByte,u._buffer[u._pos++]=p,u._pos>=u._windowSize&&k(u),e.state=(c=e.state)<4?0:c<10?c-3:c-6,e.nowPos64=y(e.nowPos64,m);var a;var c;var u,p;var f,h,l;return 0}(e.decoder);if(-1==t)throw new Error("corrupted input");e.inBytesProcessed=d,e.outBytesProcessed=e.decoder.nowPos64,(t||0<=v(e.decoder.outSize,_)&&0<=v(e.decoder.nowPos64,e.decoder.outSize))&&(k(e.decoder.m_OutWindow),E(e.decoder.m_OutWindow),e.decoder.m_RangeDecoder.Stream=null,e.alive=0)}(e),e.alive}function C(e,t){for(;e.m_NumPosStates<t;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=I({},3),e.m_MidCoder[e.m_NumPosStates]=I({},3)}function B(e,t,r){if(!A(t,e.m_Choice,0))return D(e.m_LowCoder[r],t);var n=8;return A(t,e.m_Choice,1)?n+=8+D(e.m_HighCoder,t):n+=D(e.m_MidCoder[r],t),n}function T(e){return e.m_Choice=g(2),e.m_LowCoder=g(16),e.m_MidCoder=g(16),e.m_HighCoder=I({},8),e.m_NumPosStates=0,e}function R(e){O(e.m_Choice);for(var t=0;t<e.m_NumPosStates;++t)O(e.m_LowCoder[t].Models),O(e.m_MidCoder[t].Models);O(e.m_HighCoder.Models)}function x(e){return e.m_Decoders=g(768),e}function I(e,t){return e.NumBitLevels=t,e.Models=g(1<<t),e}function D(e,t){var r,n=1;for(r=e.NumBitLevels;0!=r;--r)n=(n<<1)+A(t,e.Models,n);return n-(1<<e.NumBitLevels)}function A(e,t,r){var n,i=t[r];return n=(e.Range>>>11)*i,(-2147483648^e.Code)<(-2147483648^n)?(e.Range=n,t[r]=i+(2048-i>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|S(e.Stream),e.Range<<=8),0):(e.Range-=n,e.Code-=n,t[r]=i-(i>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|S(e.Stream),e.Range<<=8),1)}function O(e){for(var t=e.length-1;0<=t;--t)e[t]=1024}function M(e){for(var t,r,n,i=0,o=0,s=e.length,a=[],c=[];i<s;++i,++o){if(128&(t=255&e[i]))if(192==(224&t)){if(s<=i+1)return e;if(128!=(192&(r=255&e[++i])))return e;c[o]=(31&t)<<6|63&r}else{if(224!=(240&t))return e;if(s<=i+2)return e;if(128!=(192&(r=255&e[++i])))return e;if(128!=(192&(n=255&e[++i])))return e;c[o]=(15&t)<<12|(63&r)<<6|63&n}else{if(!t)return e;c[o]=t}16383==o&&(a.push(String.fromCharCode.apply(String,c)),o=-1)}return 0<o&&(c.length=o,a.push(String.fromCharCode.apply(String,c))),a.join("")}function L(e){return e[1]+e[0]}return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||(onmessage=function(e){e&&e.data&&2==e.data.action&&t.decompress(e.data.data,e.data.cbn)}),{decompress:function(e,i,o){var s,r,a,c,u={},t=void 0===i&&void 0===o;if("function"!=typeof i&&(r=i,i=o=0),o=o||function(e){void 0===r||postMessage({action:n,cbn:r,result:a?e:-1})},i=i||function(e,t){if(void 0!==r)return postMessage({action:2,cbn:r,result:e,error:t})},t){for(u.d=h({},e);l(u.d.chunker););return M(f(u.d.output))}try{u.d=h({},e),c=L(u.d.length_0),a=-1<c,o(0)}catch(e){return i(null,e)}p(function e(){try{for(var t,r=0,n=(new Date).getTime();l(u.d.chunker);)if(++r%1e3==0&&200<(new Date).getTime()-n)return a&&(s=L(u.d.chunker.decoder.nowPos64)/c,o(s)),p(e,0),0;o(1),t=M(f(u.d.output)),p(i.bind(null,t),0)}catch(e){i(null,e)}},0)}}}();r.exports={c:ke.compress,d:t.decompress}}).call(this,e("timers").setImmediate)},{timers:29}],7:[function(e,t,r){function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function n(){}n.prototype._events=void 0,n.prototype.listeners=function(e){if(!this._events||!this._events[e])return[];if(this._events[e].fn)return[this._events[e].fn];for(var t=0,r=this._events[e].length,n=new Array(r);t<r;t++)n[t]=this._events[e][t].fn;return n},n.prototype.emit=function(e,t,r,n,i,o){if(!this._events||!this._events[e])return!1;var s,a,c=this._events[e],u=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(e,c.fn,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,i),!0;case 6:return c.fn.call(c.context,t,r,n,i,o),!0}for(a=1,s=new Array(u-1);a<u;a++)s[a-1]=arguments[a];c.fn.apply(c.context,s)}else{var p,f=c.length;for(a=0;a<f;a++)switch(c[a].once&&this.removeListener(e,c[a].fn,!0),u){case 1:c[a].fn.call(c[a].context);break;case 2:c[a].fn.call(c[a].context,t);break;case 3:c[a].fn.call(c[a].context,t,r);break;default:if(!s)for(p=1,s=new Array(u-1);p<u;p++)s[p-1]=arguments[p];c[a].fn.apply(c[a].context,s)}}return!0},n.prototype.on=function(e,t,r){var n=new i(t,r||this);return this._events||(this._events={}),this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],n]:this._events[e].push(n):this._events[e]=n,this},n.prototype.once=function(e,t,r){var n=new i(t,r||this,!0);return this._events||(this._events={}),this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],n]:this._events[e].push(n):this._events[e]=n,this},n.prototype.removeListener=function(e,t,r){if(!this._events||!this._events[e])return this;var n=this._events[e],i=[];if(t&&(n.fn&&(n.fn!==t||r&&!n.once)&&i.push(n),!n.fn))for(var o=0,s=n.length;o<s;o++)(n[o].fn!==t||r&&!n[o].once)&&i.push(n[o]);return i.length?this._events[e]=1===i.length?i[0]:i:delete this._events[e],this},n.prototype.removeAllListeners=function(e){return this._events&&(e?delete this._events[e]:this._events={}),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},((n.EventEmitter=n).EventEmitter2=n).EventEmitter3=n,t.exports=n},{}],8:[function(e,t,r){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,f=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===o.call(e)},h=function(e){if(!e||"[object Object]"!==o.call(e))return!1;var t,r=i.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;for(t in e);return void 0===t||i.call(e,t)},l=function(e,t){n&&"__proto__"===t.name?n(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},d=function(e,t){if("__proto__"===t){if(!i.call(e,t))return;if(s)return s(e,t).value}return e[t]};t.exports=function e(){var t,r,n,i,o,s,a=arguments[0],c=1,u=arguments.length,p=!1;for("boolean"==typeof a&&(p=a,a=arguments[1]||{},c=2),(null==a||"object"!==(void 0===a?"undefined":_typeof(a))&&"function"!=typeof a)&&(a={});c<u;++c)if(null!=(t=arguments[c]))for(r in t)n=d(a,r),a!==(i=d(t,r))&&(p&&i&&(h(i)||(o=f(i)))?(o?(o=!1,s=n&&f(n)?n:[]):s=n&&h(n)?n:{},l(a,{name:r,newValue:e(p,s,i)})):void 0!==i&&l(a,{name:r,newValue:i}));return a}},{}],9:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],10:[function(e,t,r){var n=e("./bufferbuilder").BufferBuilder,i=e("./bufferbuilder").binaryFeatures,o={unpack:function(e){return new s(e).unpack()},pack:function(e){var t=new a;return t.pack(e),t.getBuffer()}};function s(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function a(){this.bufferBuilder=new n}function c(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}t.exports=o,s.prototype.unpack=function(){var e,t=this.unpack_uint8();if(t<128)return t;if((224^t)<32)return(224^t)-32;if((e=160^t)<=15)return this.unpack_raw(e);if((e=176^t)<=15)return this.unpack_string(e);if((e=144^t)<=15)return this.unpack_array(e);if((e=128^t)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}},s.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},s.prototype.unpack_uint16=function(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t},s.prototype.unpack_uint32=function(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t},s.prototype.unpack_uint64=function(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t},s.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},s.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},s.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},s.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},s.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t},s.prototype.unpack_string=function(e){for(var t,r,n=this.read(e),i=0,o="";i<e;)(t=n[i])<128?(o+=String.fromCharCode(t),i++):(192^t)<32?(r=(192^t)<<6|63&n[i+1],o+=String.fromCharCode(r),i+=2):(r=(15&t)<<12|(63&n[i+1])<<6|63&n[i+2],o+=String.fromCharCode(r),i+=3);return this.index+=e,o},s.prototype.unpack_array=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.unpack();return t},s.prototype.unpack_map=function(e){for(var t={},r=0;r<e;r++){var n=this.unpack(),i=this.unpack();t[n]=i}return t},s.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=(e>>23&255)-127;return(0==e>>31?1:-1)*(8388607&e|8388608)*Math.pow(2,t-23)},s.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),r=(e>>20&2047)-1023;return(0==e>>31?1:-1)*((1048575&e|1048576)*Math.pow(2,r-20)+t*Math.pow(2,r-52))},s.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")},a.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},a.prototype.pack=function(e){var t=void 0===e?"undefined":_typeof(e);if("string"==t)this.pack_string(e);else if("number"==t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==t)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if("undefined"==t)this.bufferBuilder.append(192);else{if("object"!=t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var r=e.constructor;if(r==Array)this.pack_array(e);else if(r==Blob||r==File)this.pack_bin(e);else if(r==ArrayBuffer)i.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)i.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(r==Object)this.pack_object(e);else if(r==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},a.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)},a.prototype.pack_string=function(e){var t,r=600<(t=e).length?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,c).length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this.bufferBuilder.append(216),this.pack_uint16(r);else{if(!(r<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(r)}this.bufferBuilder.append(e)},a.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var r=0;r<t;r++)this.pack(e[r])},a.prototype.pack_integer=function(e){if(-32<=e&&e<=127)this.bufferBuilder.append(255&e);else if(0<=e&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(-128<=e&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(0<=e&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(-32768<=e&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(0<=e&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(-2147483648<=e&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(-0x8000000000000000<=e&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(0<=e&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},a.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var r=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,r)-1,i=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),s=t<<31|r+1023<<20|i/o&1048575,a=i%o;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(a)},a.prototype.pack_object=function(e){var t=Object.keys(e).length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(t)}for(var r in e)e.hasOwnProperty(r)&&(this.pack(r),this.pack(e[r]))},a.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},a.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},a.prototype.pack_uint32=function(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},a.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)},a.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},a.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},a.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},a.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)}},{"./bufferbuilder":11}],11:[function(e,t,r){var n={};n.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),n.useArrayBufferView=!n.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),t.exports.binaryFeatures=n;var i=t.exports.BlobBuilder;function o(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(i=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),o.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},o.prototype.flush=function(){if(0<this._pieces.length){var e=new Uint8Array(this._pieces);n.useArrayBufferView||(e=e.buffer),this._parts.push(e),this._pieces=[]}},o.prototype.getBuffer=function(){if(this.flush(),n.useBlobBuilder){for(var e=new i,t=0,r=this._parts.length;t<r;t++)e.append(this._parts[t]);return e.getBlob()}return new Blob(this._parts)},t.exports.BufferBuilder=o},{}],12:[function(require,module,exports){(function(process,global){!function(){var root="object"===("undefined"==typeof window?"undefined":_typeof(window))?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"===(void 0===process?"undefined":_typeof(process))&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"===(void 0===module?"undefined":_typeof(module))&&module.exports,AMD="function"==typeof define&&define.amd,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(t){return function(e){return new Sha1(!0).update(e)[t]()}},createMethod=function(){var t=createOutputMethod("hex");NODE_JS&&(t=nodeWrap(t)),t.create=function(){return new Sha1},t.update=function(e){return t.create().update(e)};for(var e=0;e<OUTPUT_TYPES.length;++e){var r=OUTPUT_TYPES[e];t[r]=createOutputMethod(r)}return t},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var r,n,i=0,o=e.length||0,s=this.blocks;i<o;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(n=this.start;i<o&&n<64;++i)s[n>>2]|=e[i]<<SHIFT[3&n++];else for(n=this.start;i<o&&n<64;++i)(r=e.charCodeAt(i))<128?s[n>>2]|=r<<SHIFT[3&n++]:(r<2048?s[n>>2]|=(192|r>>6)<<SHIFT[3&n++]:(r<55296||57344<=r?s[n>>2]|=(224|r>>12)<<SHIFT[3&n++]:(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),s[n>>2]|=(240|r>>18)<<SHIFT[3&n++],s[n>>2]|=(128|r>>12&63)<<SHIFT[3&n++]),s[n>>2]|=(128|r>>6&63)<<SHIFT[3&n++]),s[n>>2]|=(128|63&r)<<SHIFT[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,64<=n?(this.block=s[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],56<=t&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,r=this.h0,n=this.h1,i=this.h2,o=this.h3,s=this.h4,a=this.blocks;for(e=16;e<80;++e)t=a[e-3]^a[e-8]^a[e-14]^a[e-16],a[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)r=(t=(n=(t=(i=(t=(o=(t=(s=(t=r<<5|r>>>27)+(n&i|~n&o)+s+1518500249+a[e]<<0)<<5|s>>>27)+(r&(n=n<<30|n>>>2)|~r&i)+o+1518500249+a[e+1]<<0)<<5|o>>>27)+(s&(r=r<<30|r>>>2)|~s&n)+i+1518500249+a[e+2]<<0)<<5|i>>>27)+(o&(s=s<<30|s>>>2)|~o&r)+n+1518500249+a[e+3]<<0)<<5|n>>>27)+(i&(o=o<<30|o>>>2)|~i&s)+r+1518500249+a[e+4]<<0,i=i<<30|i>>>2;for(;e<40;e+=5)r=(t=(n=(t=(i=(t=(o=(t=(s=(t=r<<5|r>>>27)+(n^i^o)+s+1859775393+a[e]<<0)<<5|s>>>27)+(r^(n=n<<30|n>>>2)^i)+o+1859775393+a[e+1]<<0)<<5|o>>>27)+(s^(r=r<<30|r>>>2)^n)+i+1859775393+a[e+2]<<0)<<5|i>>>27)+(o^(s=s<<30|s>>>2)^r)+n+1859775393+a[e+3]<<0)<<5|n>>>27)+(i^(o=o<<30|o>>>2)^s)+r+1859775393+a[e+4]<<0,i=i<<30|i>>>2;for(;e<60;e+=5)r=(t=(n=(t=(i=(t=(o=(t=(s=(t=r<<5|r>>>27)+(n&i|n&o|i&o)+s-1894007588+a[e]<<0)<<5|s>>>27)+(r&(n=n<<30|n>>>2)|r&i|n&i)+o-1894007588+a[e+1]<<0)<<5|o>>>27)+(s&(r=r<<30|r>>>2)|s&n|r&n)+i-1894007588+a[e+2]<<0)<<5|i>>>27)+(o&(s=s<<30|s>>>2)|o&r|s&r)+n-1894007588+a[e+3]<<0)<<5|n>>>27)+(i&(o=o<<30|o>>>2)|i&s|o&s)+r-1894007588+a[e+4]<<0,i=i<<30|i>>>2;for(;e<80;e+=5)r=(t=(n=(t=(i=(t=(o=(t=(s=(t=r<<5|r>>>27)+(n^i^o)+s-899497514+a[e]<<0)<<5|s>>>27)+(r^(n=n<<30|n>>>2)^i)+o-899497514+a[e+1]<<0)<<5|o>>>27)+(s^(r=r<<30|r>>>2)^n)+i-899497514+a[e+2]<<0)<<5|i>>>27)+(o^(s=s<<30|s>>>2)^r)+n-899497514+a[e+3]<<0)<<5|n>>>27)+(i^(o=o<<30|o>>>2)^s)+r-899497514+a[e+4]<<0,i=i<<30|i>>>2;this.h0=this.h0+r<<0,this.h1=this.h1+n<<0,this.h2=this.h2+i<<0,this.h3=this.h3+o<<0,this.h4=this.h4+s<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&define(function(){return exports}))}()}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:21}],13:[function(e,t,r){var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t},o=function(){function e(){n(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e].indexOf(t);return this.listeners[e].splice(r,1),-1<r},e.prototype.trigger=function(e){var t=this.listeners[e],r=void 0,n=void 0,i=void 0;if(t)if(2===arguments.length)for(n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),n=t.length,r=0;r<n;++r)t[r].apply(this,i)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},e}(),l=function(t){function r(){n(this,r);var e=h(this,t.call(this));return e.buffer="",e}return i(r,t),r.prototype.push=function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},r}(o),p=function(e){for(var t=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},n=t.length,i=void 0;n--;)""!==t[n]&&((i=/([^=]*)=(.*)/.exec(t[n]).slice(1))[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),r[i[0]]=i[1]);return r},d=function(t){function r(){n(this,r);var e=h(this,t.call(this));return e.customParsers=[],e}return i(r,t),r.prototype.push=function(e){var t=void 0,r=void 0;if(0!==(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===e[0]){for(var n=0;n<this.customParsers.length;n++)if(this.customParsers[n].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return r={type:"tag",tagType:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void this.trigger("data",r);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"totalduration"},t[1]&&(r.duration=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"version"},t[1]&&(r.version=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return r={type:"tag",tagType:"playlist-type"},t[1]&&(r.playlistType=t[1]),void this.trigger("data",r);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"byterange"},t[1]&&(r.length=parseInt(t[1],10)),t[2]&&(r.offset=parseInt(t[2],10)),void this.trigger("data",r);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return r={type:"tag",tagType:"allow-cache"},t[1]&&(r.allowed=!/NO/.test(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"map"},t[1]){var i=p(t[1]);if(i.URI&&(r.uri=i.URI),i.BYTERANGE){var o=i.BYTERANGE.split("@"),s=o[0],a=o[1];r.byterange={},s&&(r.byterange.length=parseInt(s,10)),a&&(r.byterange.offset=parseInt(a,10))}}this.trigger("data",r)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"stream-inf"},t[1]){if(r.attributes=p(t[1]),r.attributes.RESOLUTION){var c=r.attributes.RESOLUTION.split("x"),u={};c[0]&&(u.width=parseInt(c[0],10)),c[1]&&(u.height=parseInt(c[1],10)),r.attributes.RESOLUTION=u}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}this.trigger("data",r)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return r={type:"tag",tagType:"media"},t[1]&&(r.attributes=p(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-ENDLIST/.exec(e))this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return r={type:"tag",tagType:"program-date-time"},t[1]&&(r.dateTimeString=t[1],r.dateTimeObject=new Date(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return r={type:"tag",tagType:"key"},t[1]&&(r.attributes=p(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.trigger("data",r);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return r={type:"tag",tagType:"start"},t[1]&&(r.attributes=p(t[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void this.trigger("data",r);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out-cont"},t[1]?r.data=t[1]:r.data="",void this.trigger("data",r);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out"},t[1]?r.data=t[1]:r.data="",void this.trigger("data",r);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-in"},t[1]?r.data=t[1]:r.data="",void this.trigger("data",r);this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}else this.trigger("data",{type:"uri",uri:e})},r.prototype.addParser=function(e){var t=this,r=e.expression,n=e.customType,i=e.dataParser,o=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push(function(e){if(r.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:n,segment:o}),!0})},r}(o),s=function(t){function r(){n(this,r);var e=h(this,t.call(this));e.lineStream=new l,e.parseStream=new d,e.lineStream.pipe(e.parseStream);var i=e,o=[],s={},a=void 0,c=void 0,u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},p=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(t){var r=void 0,n=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&((s.byterange=e).length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&((s.byterange=e).offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(s.duration=t.duration),0===t.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){t.attributes?"NONE"!==t.attributes.METHOD?t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),c={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(c.iv=t.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):c=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,p=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){a={},t.uri&&(a.uri=t.uri),t.byterange&&(a.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes?(s.attributes||(s.attributes={}),f(s.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var e=this.manifest.mediaGroups[t.attributes.TYPE];e[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},r=e[t.attributes["GROUP-ID"]],(n={default:/yes/i.test(t.attributes.DEFAULT)}).default?n.autoselect=!0:n.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(n.language=t.attributes.LANGUAGE),t.attributes.URI&&(n.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(n.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(n.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(n.forced=/yes/i.test(t.attributes.FORCED)),r[t.attributes.NAME]=n}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){p+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),s.dateTimeString=t.dateTimeString,s.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=t.data},"cue-out-cont":function(){s.cueOutCont=t.data},"cue-in":function(){s.cueIn=t.data}}[t.tagType]||function(){}).call(i)},uri:function(){s.uri=t.uri,o.push(s),!this.manifest.targetDuration||"duration"in s||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),c&&(s.key=c),s.timeline=p,a&&(s.map=a),s={}},comment:function(){},custom:function(){t.segment?(s.custom=s.custom||{},s.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(i)}),e}return i(r,t),r.prototype.push=function(e){this.lineStream.push(e)},r.prototype.end=function(){this.lineStream.push("\n")},r.prototype.addParser=function(e){this.parseStream.addParser(e)},r}(o);r.LineStream=l,r.ParseStream=d,r.Parser=s},{}],14:[function(e,t,r){t.exports.RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription,t.exports.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,t.exports.RTCIceCandidate=window.RTCIceCandidate||window.mozRTCIceCandidate},{}],15:[function(e,t,r){var a=e("./util"),n=e("eventemitter3"),i=e("./negotiator"),o=e("reliable");function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);n.call(this),this.options=a.extend({serialization:"binary",reliable:!1},r),this.open=!1,this.type="data",this.peer=e,this.provider=t,this.id=this.options.connectionId||s._idPrefix+a.randomToken(),this.label=this.options.label||this.id,this.metadata=this.options.metadata,this.serialization=this.options.serialization,this.reliable=this.options.reliable,this._buffer=[],this._buffering=!1,this.bufferSize=0,this._chunkedData={},this.options._payload&&(this._peerBrowser=this.options._payload.browser),i.startConnection(this,this.options._payload||{originator:!0})}a.inherits(s,n),s._idPrefix="dc_",s.prototype.initialize=function(e){this._dc=this.dataChannel=e,this._configureDataChannel()},s.prototype._configureDataChannel=function(){var t=this;a.supports.sctp&&(this._dc.binaryType="arraybuffer"),this._dc.onopen=function(){a.log("Data channel connection success"),t.open=!0,t.emit("open")},!a.supports.sctp&&this.reliable&&(this._reliable=new o(this._dc,a.debug)),this._reliable?this._reliable.onmessage=function(e){t.emit("data",e)}:this._dc.onmessage=function(e){t._handleDataMessage(e)},this._dc.onclose=function(e){a.log("DataChannel closed for:",t.peer),t.close()}},s.prototype._handleDataMessage=function(e){var t=this,r=e.data,n=r.constructor;if("binary"===this.serialization||"binary-utf8"===this.serialization){if(n===Blob)return void a.blobToArrayBuffer(r,function(e){r=a.unpack(e),t.emit("data",r)});if(n===ArrayBuffer)r=a.unpack(r);else if(n===String){var i=a.binaryStringToArrayBuffer(r);r=a.unpack(i)}}else"json"===this.serialization&&(r=JSON.parse(r));if(r.__peerData){var o=r.__peerData,s=this._chunkedData[o]||{data:[],count:0,total:r.total};return s.data[r.n]=r.data,s.count+=1,s.total===s.count&&(delete this._chunkedData[o],r=new Blob(s.data),this._handleDataMessage({data:r})),void(this._chunkedData[o]=s)}this.emit("data",r)},s.prototype.close=function(){this.open&&(this.open=!1,i.cleanup(this),this.emit("close"))},s.prototype.send=function(e,t){if(this.open)if(this._reliable)this._reliable.send(e);else{var r=this;if("json"===this.serialization)this._bufferedSend(JSON.stringify(e));else if("binary"===this.serialization||"binary-utf8"===this.serialization){var n=a.pack(e);if((a.chunkedBrowsers[this._peerBrowser]||a.chunkedBrowsers[a.browser])&&!t&&n.size>a.chunkedMTU)return void this._sendChunks(n);a.supports.sctp?a.supports.binaryBlob?this._bufferedSend(n):a.blobToArrayBuffer(n,function(e){r._bufferedSend(e)}):a.blobToBinaryString(n,function(e){r._bufferedSend(e)})}else this._bufferedSend(e)}else this.emit("error",new Error("Connection is not open. You should listen for the `open` event before sending messages."))},s.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this.bufferSize=this._buffer.length)},s.prototype._trySend=function(e){try{this._dc.send(e)}catch(e){this._buffering=!0;var t=this;return setTimeout(function(){t._buffering=!1,t._tryBuffer()},100),!1}return!0},s.prototype._tryBuffer=function(){if(0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this.bufferSize=this._buffer.length,this._tryBuffer())}},s.prototype._sendChunks=function(e){for(var t=a.chunk(e),r=0,n=t.length;r<n;r+=1){e=t[r];this.send(e,!0)}},s.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case"ANSWER":this._peerBrowser=t.browser,i.handleSDP(e.type,this,t.sdp);break;case"CANDIDATE":i.handleCandidate(this,t.candidate);break;default:a.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},t.exports=s},{"./negotiator":17,"./util":20,eventemitter3:7,reliable:26}],16:[function(e,t,r){var i=e("./util"),n=e("eventemitter3"),o=e("./negotiator");function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);n.call(this),this.options=i.extend({},r),this.open=!1,this.type="media",this.peer=e,this.provider=t,this.metadata=this.options.metadata,this.localStream=this.options._stream,this.id=this.options.connectionId||s._idPrefix+i.randomToken(),this.localStream&&o.startConnection(this,{_stream:this.localStream,originator:!0})}i.inherits(s,n),s._idPrefix="mc_",s.prototype.addStream=function(e){i.log("Receiving stream",e),this.remoteStream=e,this.emit("stream",e)},s.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case"ANSWER":o.handleSDP(e.type,this,t.sdp),this.open=!0;break;case"CANDIDATE":o.handleCandidate(this,t.candidate);break;default:i.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},s.prototype.answer=function(e){if(this.localStream)i.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this.options._payload._stream=e,this.localStream=e,o.startConnection(this,this.options._payload);for(var t=this.provider._getMessages(this.id),r=0,n=t.length;r<n;r+=1)this.handleMessage(t[r]);this.open=!0}},s.prototype.close=function(){this.open&&(this.open=!1,o.cleanup(this),this.emit("close"))},t.exports=s},{"./negotiator":17,"./util":20,eventemitter3:7}],17:[function(e,t,r){var s=e("./util"),i=e("./adapter").RTCPeerConnection,o=e("./adapter").RTCSessionDescription,a=e("./adapter").RTCIceCandidate,c={pcs:{data:{},media:{}},queue:[],_idPrefix:"pc_",startConnection:function(e,t){var r=c._getPeerConnection(e,t);if(e.pc=e.peerConnection=r,"media"===e.type&&t._stream&&r.addStream(t._stream),t.originator){if("data"===e.type){var n={};s.supports.sctp||(n={reliable:t.reliable});var i=r.createDataChannel(e.label,n);e.initialize(i)}c._makeOffer(e)}else c.handleSDP("OFFER",e,t.sdp)},_getPeerConnection:function(e,t){c.pcs[e.type]||s.error(e.type+" is not a valid connection type. Maybe you overrode the `type` property somewhere."),c.pcs[e.type][e.peer]||(c.pcs[e.type][e.peer]={});var r;c.pcs[e.type][e.peer];return t.pc&&(r=c.pcs[e.type][e.peer][t.pc]),r&&"stable"===r.signalingState||(r=c._startPeerConnection(e)),r},_startPeerConnection:function(e){s.log("Creating RTCPeerConnection.");var t=c._idPrefix+s.randomToken(),r={};"data"!==e.type||s.supports.sctp?"media"===e.type&&(r={optional:[{DtlsSrtpKeyAgreement:!0}]}):r={optional:[{RtpDataChannels:!0}]};var n=new i(e.provider.options.config,r);return c.pcs[e.type][e.peer][t]=n,c._setupListeners(e,n,t),n},_setupListeners:function(t,e,r){var n=t.peer,i=t.id,o=t.provider;s.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&(s.log("Received ICE candidates for:",t.peer),o.socket.send({type:"CANDIDATE",payload:{candidate:e.candidate,type:t.type,connectionId:t.id},dst:n}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":s.log("iceConnectionState is disconnected, closing connections to "+n),t.emit("error",new Error("Negotiation of connection to "+n+" failed.")),t.close();break;case"disconnected":s.log("iceConnectionState is disconnected, closing connections to "+n),t.close();break;case"completed":e.onicecandidate=s.noop}},e.onicechange=e.oniceconnectionstatechange,s.log("Listening for data channel"),e.ondatachannel=function(e){s.log("Received data channel");var t=e.channel;o.getConnection(n,i).initialize(t)},s.log("Listening for remote stream"),e.onaddstream=function(e){s.log("Received remote stream");var t=e.stream,r=o.getConnection(n,i);"media"===r.type&&r.addStream(t)}},cleanup:function(e){s.log("Cleaning up PeerConnection to "+e.peer);var t=e.pc;t&&(t.readyState&&"closed"!==t.readyState||"closed"!==t.signalingState)&&(t.close(),e.pc=null)},_makeOffer:function(t){var r=t.pc;r.createOffer(function(e){s.log("Created offer."),!s.supports.sctp&&"data"===t.type&&t.reliable&&(e.sdp=Reliable.higherBandwidthSDP(e.sdp)),r.setLocalDescription(e,function(){s.log("Set localDescription: offer","for:",t.peer),t.provider.socket.send({type:"OFFER",payload:{sdp:e,type:t.type,label:t.label,connectionId:t.id,reliable:t.reliable,serialization:t.serialization,metadata:t.metadata,browser:s.browser},dst:t.peer})},function(e){"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=e&&(t.provider.emitError("webrtc",e),s.log("Failed to setLocalDescription, ",e))})},function(e){t.provider.emitError("webrtc",e),s.log("Failed to createOffer, ",e)},t.options.constraints)},_makeAnswer:function(t){var r=t.pc;r.createAnswer(function(e){s.log("Created answer."),!s.supports.sctp&&"data"===t.type&&t.reliable&&(e.sdp=Reliable.higherBandwidthSDP(e.sdp)),r.setLocalDescription(e,function(){s.log("Set localDescription: answer","for:",t.peer),t.provider.socket.send({type:"ANSWER",payload:{sdp:e,type:t.type,connectionId:t.id,browser:s.browser},dst:t.peer})},function(e){t.provider.emitError("webrtc",e),s.log("Failed to setLocalDescription, ",e)})},function(e){t.provider.emitError("webrtc",e),s.log("Failed to create answer, ",e)})},handleSDP:function(e,t,r){r=new o(r);var n=t.pc;s.log("Setting remote description",r),n.setRemoteDescription(r,function(){s.log("Set remoteDescription:",e,"for:",t.peer),"OFFER"===e&&c._makeAnswer(t)},function(e){t.provider.emitError("webrtc",e),s.log("Failed to setRemoteDescription, ",e)})},handleCandidate:function(e,t){var r=t.candidate,n=t.sdpMLineIndex;e.pc.addIceCandidate(new a({sdpMLineIndex:n,candidate:r})),s.log("Added ICE candidate for:",e.peer)}};t.exports=c},{"./adapter":14,"./util":20}],18:[function(e,t,r){var p=e("./util"),n=e("eventemitter3"),i=e("./socket"),f=e("./mediaconnection"),h=e("./dataconnection");function o(e,t){if(!(this instanceof o))return new o(e,t);n.call(this),e&&e.constructor==Object?(t=e,e=void 0):e&&(e=e.toString()),t=p.extend({debug:0,host:p.CLOUD_HOST,port:p.CLOUD_PORT,path:"/",token:p.randomToken(),config:p.defaultConfig,key:"peerjs"},t),"/"===(this.options=t).host&&(t.host=window.location.hostname),"/"!==t.path[0]&&(t.path="/"+t.path),"/"!==t.path[t.path.length-1]&&(t.path+="/"),void 0===t.secure&&t.host!==p.CLOUD_HOST&&(t.secure=p.isSecure(),"https"==t.protocol&&(t.secure=!0)),t.logFunction&&p.setLogFunction(t.logFunction),p.setLogLevel(t.debug),p.supports.audioVideo||p.supports.data?p.validateId(e)?(this.destroyed=!1,this.disconnected=!1,this.open=!1,this.connections={},this._lostMessages={},this._initializeServerConnection(),e?this._initialize(e):this._retrieveId()):this._delayedAbort("invalid-id",'ID "'+e+'" is invalid'):this._delayedAbort("browser-incompatible","The current browser does not support WebRTC")}p.inherits(o,n),o.prototype._initializeServerConnection=function(){var t=this;this.socket=new i(this.options.secure,this.options.host,this.options.port,this.options.path,this.options.key,this.options.wsport,this.options.protocol),this.socket.on("message",function(e){t._handleMessage(e)}),this.socket.on("error",function(e){t._abort("socket-error",e)}),this.socket.on("disconnected",function(){t.disconnected||(t.emitError("network","Lost connection to server."),t.disconnect())}),this.socket.on("close",function(){t.disconnected||t._abort("socket-closed","Underlying socket is already closed.")})},o.prototype._retrieveId=function(e){var r=this,t=new XMLHttpRequest,n=(this.options.secure?"https://":"http://")+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/id";n+="?ts="+(new Date).getTime()+Math.random(),t.open("get",n,!0),t.onerror=function(e){p.error("Error retrieving ID",e);var t="";"/"===r.options.path&&r.options.host!==p.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),r._abort("server-error","Could not get an ID from the server."+t)},t.onreadystatechange=function(){4===t.readyState&&(200===t.status?r._initialize(t.responseText):t.onerror())},t.send(null)},o.prototype._initialize=function(e){this.id=e,this.socket.start(this.id,this.options.token)},o.prototype._handleMessage=function(e){var t,r=e.type,n=e.payload,i=e.src;switch(r){case"OPEN":this.emit("open",this.id),this.open=!0;break;case"ERROR":this._abort("server-error",n.msg);break;case"ID-TAKEN":this._abort("unavailable-id","ID `"+this.id+"` is taken");break;case"INVALID-KEY":this._abort("invalid-key",'API KEY "'+this.options.key+'" is invalid');break;case"LEAVE":p.log("Received leave message from",i),this._cleanupPeer(i);break;case"EXPIRE":this.emitError("peer-unavailable","Could not connect to peer "+i);break;case"OFFER":var o=n.connectionId;if((t=this.getConnection(i,o))&&(t.close(),p.warn("Offer received for existing Connection ID:",o)),"media"===n.type)t=new f(i,this,{connectionId:o,_payload:n,metadata:n.metadata}),this._addConnection(i,t),this.emit("call",t);else{if("data"!==n.type)return void p.warn("Received malformed connection type:",n.type);t=new h(i,this,{connectionId:o,_payload:n,metadata:n.metadata,label:n.label,serialization:n.serialization,reliable:n.reliable}),this._addConnection(i,t),this.emit("connection",t)}for(var s=this._getMessages(o),a=0,c=s.length;a<c;a+=1)t.handleMessage(s[a]);break;default:if(!n)return void p.warn("You received a malformed message from "+i+" of type "+r);var u=n.connectionId;(t=this.getConnection(i,u))&&t.pc?t.handleMessage(e):u?this._storeMessage(u,e):p.warn("You received an unrecognized message:",e)}},o.prototype._storeMessage=function(e,t){this._lostMessages[e]||(this._lostMessages[e]=[]),this._lostMessages[e].push(t)},o.prototype._getMessages=function(e){var t=this._lostMessages[e];return t?(delete this._lostMessages[e],t):[]},o.prototype.connect=function(e,t){if(this.disconnected)return p.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server.");var r=new h(e,this,t);return this._addConnection(e,r),r},o.prototype.call=function(e,t,r){if(this.disconnected)return p.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server.");if(t){(r=r||{})._stream=t;var n=new f(e,this,r);return this._addConnection(e,n),n}p.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},o.prototype._addConnection=function(e,t){this.connections[e]||(this.connections[e]=[]),this.connections[e].push(t)},o.prototype.getConnection=function(e,t){var r=this.connections[e];if(!r)return null;for(var n=0,i=r.length;n<i;n++)if(r[n].id===t)return r[n];return null},o.prototype._delayedAbort=function(e,t){var r=this;p.setZeroTimeout(function(){r._abort(e,t)})},o.prototype._abort=function(e,t){p.error("Aborting!"),this._lastServerId?this.disconnect():this.destroy(),this.emitError(e,t)},o.prototype.emitError=function(e,t){p.error("Error:",t),"string"==typeof t&&(t=new Error(t)),t.type=e,this.emit("error",t)},o.prototype.destroy=function(){this.destroyed||(this._cleanup(),this.disconnect(),this.destroyed=!0)},o.prototype._cleanup=function(){if(this.connections)for(var e=Object.keys(this.connections),t=0,r=e.length;t<r;t++)this._cleanupPeer(e[t]);this.emit("close")},o.prototype._cleanupPeer=function(e){for(var t=this.connections[e],r=0,n=t.length;r<n;r+=1)t[r].close()},o.prototype.disconnect=function(){var e=this;p.setZeroTimeout(function(){e.disconnected||(e.disconnected=!0,e.open=!1,e.socket&&e.socket.close(),e.emit("disconnected",e.id),e._lastServerId=e.id,e.id=null)})},o.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)p.log("Attempting reconnection to server with ID "+this._lastServerId),this.disconnected=!1,this._initializeServerConnection(),this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");p.error("In a hurry? We're still trying to make the initial connection!")}},o.prototype.listAllPeers=function(t){t=t||function(){};var r=this,n=new XMLHttpRequest,e=(this.options.secure?"https://":"http://")+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/peers";e+="?ts="+(new Date).getTime()+Math.random(),n.open("get",e,!0),n.onerror=function(e){r._abort("server-error","Could not get peers from the server."),t([])},n.onreadystatechange=function(){if(4===n.readyState){if(401===n.status){var e="";throw e=r.options.host!==p.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",t([]),new Error("It doesn't look like you have permission to list peers IDs. "+e)}200!==n.status?t([]):t(JSON.parse(n.responseText))}},n.send(null)},t.exports=o},{"./dataconnection":15,"./mediaconnection":16,"./socket":19,"./util":20,eventemitter3:7}],19:[function(e,t,r){var n=e("./util"),u=e("eventemitter3"),p="ws";function f(e,t,r,n,i,o,s){if(!(this instanceof f))return new f(e,t,r,n,i,o,s);o=o||r,u.call(this),s&&(p=s),console.log("signalServer protocol:",p),this.disconnected=!1,this._queue=[];var a=e?"https://":"http://",c=e?"wss://":"ws://";this._httpUrl=a+t+":"+r+n+i,this._wsUrl=c+t+":"+o+n+"peerjs?key="+i}n.inherits(f,u),f.prototype.start=function(e,t){this.id=e,this._httpUrl+="/"+e+"/"+t,this._wsUrl+="&id="+e+"&token="+t,"ws"==p||"wss"==p?this._startWebSocket():this._startXhrStream()},f.prototype._startWebSocket=function(e){var r=this;this._socket||(this._socket=new WebSocket(this._wsUrl),this._socket.onmessage=function(t){try{var e=JSON.parse(t.data)}catch(e){return void n.log("Invalid server message",t.data)}r.emit("message",e)},this._socket.onclose=function(e){n.log("Socket closed."),r.disconnected=!0,r.emit("disconnected")},this._socket.onopen=function(){r._timeout&&(clearTimeout(r._timeout),setTimeout(function(){r._http.abort(),r._http=null},5e3)),r._sendQueuedMessages(),n.log("Socket open")})},f.prototype._startXhrStream=function(e){try{var t=this;this._http=new XMLHttpRequest,this._http._index=0,this._http._streamIndex=e||0,this._http.open("post",this._httpUrl+"/id?i="+this._http._streamIndex,!0),this._http.onerror=function(){clearTimeout(t._timeout),t.emit("disconnected")},this._http.onreadystatechange=function(){2==this.readyState&&this.old?(this.old.abort(),delete this.old):2<this.readyState&&200===this.status&&this.responseText&&t._handleStream(this)},this._http.send(null),this._setHTTPTimeout()}catch(e){n.log("XMLHttpRequest not available; defaulting to WebSockets")}},f.prototype._handleStream=function(e){for(var t,r=e.responseText.split("\n"),n=e._index;n<r.length;n++)try{t=JSON.parse(r[n]),this.emit("message",t)}catch(e){}e._index=r.length-1},f.prototype._setHTTPTimeout=function(){var t=this;this._timeout=setTimeout(function(){var e=t._http;t._wsOpen()?e.abort():(t._startXhrStream(e._streamIndex+1),t._http.old=e)},25e3)},f.prototype._wsOpen=function(){return this._socket&&1==this._socket.readyState},f.prototype._sendQueuedMessages=function(){for(var e=0,t=this._queue.length;e<t;e+=1)this.send(this._queue[e])},f.prototype.send=function(e){if(!this.disconnected)if(this.id)if(e.type){var t=JSON.stringify(e);if(this._wsOpen())this._socket.send(t);else{if("ws"==p)return;var r=new XMLHttpRequest,n=this._httpUrl+"/"+e.type.toLowerCase();r.open("post",n,!0),r.setRequestHeader("Content-Type","application/json"),r.send(t)}}else this.emit("error","Invalid message");else this._queue.push(e)},f.prototype.close=function(){!this.disconnected&&this._wsOpen()&&(this._socket.close(),this.disconnected=!0)},t.exports=f},{"./util":20,eventemitter3:7}],20:[function(e,t,r){var c={iceServers:[{url:"stun:stun.l.google.com:19302"}]},u=1,n=e("js-binarypack"),p=e("./adapter").RTCPeerConnection,f={noop:function(){},CLOUD_HOST:"0.peerjs.com",CLOUD_PORT:9e3,chunkedBrowsers:{Chrome:1},chunkedMTU:16300,logLevel:0,setLogLevel:function(e){var t=parseInt(e,10);isNaN(parseInt(e,10))?f.logLevel=e?3:0:f.logLevel=t,f.log=f.warn=f.error=f.noop,0<f.logLevel&&(f.error=f._printWith("ERROR")),1<f.logLevel&&(f.warn=f._printWith("WARNING")),2<f.logLevel&&(f.log=f._print)},setLogFunction:function(e){e.constructor!==Function?f.warn("The log function you passed in is not a function. Defaulting to regular logs."):f._print=e},_printWith:function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t),f._print.apply(f,e)}},_print:function(){var e=!1,t=Array.prototype.slice.call(arguments);t.unshift("PeerJS: ");for(var r=0,n=t.length;r<n;r++)t[r]instanceof Error&&(t[r]="("+t[r].name+") "+t[r].message,e=!0);e?console.error.apply(console,t):console.log.apply(console,t)},defaultConfig:c,browser:window.mozRTCPeerConnection?"Firefox":window.webkitRTCPeerConnection?"Chrome":window.RTCPeerConnection?"Supported":"Unsupported",supports:function(){if(void 0===p)return{};var e,t,r=!0,n=!0,i=!1,o=!1,s=!!window.webkitRTCPeerConnection;try{e=new p(c,{optional:[{RtpDataChannels:!0}]})}catch(e){n=r=!1}if(r)try{t=e.createDataChannel("_PEERJSTEST")}catch(e){r=!1}if(r){try{t.binaryType="blob",i=!0}catch(e){}var a=new p(c,{});try{o=a.createDataChannel("_PEERJSRELIABLETEST",{}).reliable}catch(e){}a.close()}return n&&(n=!!e.addStream),e&&e.close(),{audioVideo:n,data:r,binaryBlob:i,binary:o,reliable:o,sctp:o,onnegotiationneeded:s}}(),validateId:function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(e)},validateKey:function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(e)},debug:!1,inherits:function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},extend:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},pack:n.pack,unpack:n.unpack,log:function(){if(f.debug){var e=!1,t=Array.prototype.slice.call(arguments);t.unshift("PeerJS: ");for(var r=0,n=t.length;r<n;r++)t[r]instanceof Error&&(t[r]="("+t[r].name+") "+t[r].message,e=!0);e?console.error.apply(console,t):console.log.apply(console,t)}},setZeroTimeout:function(t){var r=[],n="zero-timeout-message";function e(e){e.source==t&&e.data==n&&(e.stopPropagation&&e.stopPropagation(),r.length&&r.shift()())}return t.addEventListener?t.addEventListener("message",e,!0):t.attachEvent&&t.attachEvent("onmessage",e),function(e){r.push(e),t.postMessage(n,"*")}}(window),chunk:function(e){for(var t=[],r=e.size,n=0,i=n,o=Math.ceil(r/f.chunkedMTU);i<r;){var s=Math.min(r,i+f.chunkedMTU),a=e.slice(i,s),c={__peerData:u,n:n,data:a,total:o};t.push(c),i=s,n+=1}return u+=1,t},blobToArrayBuffer:function(e,t){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsArrayBuffer(e)},blobToBinaryString:function(e,t){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsBinaryString(e)},binaryStringToArrayBuffer:function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer},randomToken:function(){return Math.random().toString(36).substr(2)},isSecure:function(){return"https:"===location.protocol}};t.exports=f},{"./adapter":14,"js-binarypack":10}],21:[function(e,t,r){var n,i,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var u,p=[],f=!1,h=-1;function l(){f&&u&&(f=!1,u.length?p=u.concat(p):h=-1,p.length&&d())}function d(){if(!f){var e=c(l);f=!0;for(var t=p.length;t;){for(u=p,p=[];++h<t;)u&&u[h].run();h=-1,t=p.length}u=null,f=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function _(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new _(e,t)),1!==p.length||f||c(d)},_.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],22:[function(e,D,A){(function(I){!function(e){var t="object"==(void 0===A?"undefined":_typeof(A))&&A&&!A.nodeType&&A,r="object"==(void 0===D?"undefined":_typeof(D))&&D&&!D.nodeType&&D,n="object"==(void 0===I?"undefined":_typeof(I))&&I;n.global!==n&&n.window!==n&&n.self!==n||(e=n);var i,o,g=2147483647,y=36,v=1,b=26,s=38,a=700,w=72,S=128,k="-",c=/^xn--/,u=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=y-v,P=Math.floor,E=String.fromCharCode;function C(e){throw new RangeError(f[e])}function l(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function d(e,t){var r=e.split("@"),n="";return 1<r.length&&(n=r[0]+"@",e=r[1]),n+l((e=e.replace(p,".")).split("."),t).join(".")}function B(e){for(var t,r,n=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function T(e){return l(e,function(e){var t="";return 65535<e&&(t+=E((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=E(e)}).join("")}function R(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?P(e/a):e>>1,e+=P(e/t);h*b>>1<e;n+=y)e=P(e/h);return P(n+(h+1)*e/(e+s))}function _(e){var t,r,n,i,o,s,a,c,u,p,f,h=[],l=e.length,d=0,_=S,m=w;for((r=e.lastIndexOf(k))<0&&(r=0),n=0;n<r;++n)128<=e.charCodeAt(n)&&C("not-basic"),h.push(e.charCodeAt(n));for(i=0<r?r+1:0;i<l;){for(o=d,s=1,a=y;l<=i&&C("invalid-input"),f=e.charCodeAt(i++),(y<=(c=f-48<10?f-22:f-65<26?f-65:f-97<26?f-97:y)||c>P((g-d)/s))&&C("overflow"),d+=c*s,!(c<(u=a<=m?v:m+b<=a?b:a-m));a+=y)s>P(g/(p=y-u))&&C("overflow"),s*=p;m=x(d-o,t=h.length+1,0==o),P(d/t)>g-_&&C("overflow"),_+=P(d/t),d%=t,h.splice(d++,0,_)}return T(h)}function m(e){var t,r,n,i,o,s,a,c,u,p,f,h,l,d,_,m=[];for(h=(e=B(e)).length,t=S,o=w,s=r=0;s<h;++s)(f=e[s])<128&&m.push(E(f));for(n=i=m.length,i&&m.push(k);n<h;){for(a=g,s=0;s<h;++s)t<=(f=e[s])&&f<a&&(a=f);for(a-t>P((g-r)/(l=n+1))&&C("overflow"),r+=(a-t)*l,t=a,s=0;s<h;++s)if((f=e[s])<t&&++r>g&&C("overflow"),f==t){for(c=r,u=y;!(c<(p=u<=o?v:o+b<=u?b:u-o));u+=y)_=c-p,d=y-p,m.push(E(R(p+_%d,0))),c=P(_/d);m.push(E(R(c,0))),o=x(r,l,n==i),r=0,++n}++r,++t}return m.join("")}if(i={version:"1.4.1",ucs2:{decode:B,encode:T},decode:_,encode:m,toASCII:function(e){return d(e,function(e){return u.test(e)?"xn--"+m(e):e})},toUnicode:function(e){return d(e,function(e){return c.test(e)?_(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==_typeof(define.amd)&&define.amd)define("punycode",function(){return i});else if(t&&r)if(D.exports==t)r.exports=i;else for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);else e.punycode=i}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(e,t,r){t.exports=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a,c,u=e.length;0<s&&s<u&&(u=s);for(var p=0;p<u;++p){var f,h,l,d,_=e[p].replace(o,"%20"),m=_.indexOf(r);0<=m?(f=_.substr(0,m),h=_.substr(m+1)):(f=_,h=""),l=decodeURIComponent(f),d=decodeURIComponent(h),a=i,c=l,Object.prototype.hasOwnProperty.call(a,c)?g(i[l])?i[l].push(d):i[l]=[i[l],d]:i[l]=d}return i};var g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],24:[function(e,t,r){var o=function(e){switch(void 0===e?"undefined":_typeof(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(r,n,i,e){return n=n||"&",i=i||"=",null===r&&(r=void 0),"object"===(void 0===r?"undefined":_typeof(r))?a(c(r),function(e){var t=encodeURIComponent(o(e))+i;return s(r[e])?a(r[e],function(e){return t+encodeURIComponent(o(e))}).join(n):t+encodeURIComponent(o(r[e]))}).join(n):e?encodeURIComponent(o(e))+i+encodeURIComponent(o(r)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var c=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],25:[function(e,t,r){r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":23,"./encode":24}],26:[function(e,t,r){var u=e("./util");function n(e,t){if(!(this instanceof n))return new n(e);this._dc=e,u.debug=t,this._outgoing={},this._incoming={},this._received={},this._window=1e3,this._mtu=500,this._interval=0,this._count=0,this._queue=[],this._setupDC()}n.prototype.send=function(e){var t=u.pack(e);t.size<this._mtu?this._handleSend(["no",t]):(this._outgoing[this._count]={ack:0,chunks:this._chunk(t)},u.debug&&(this._outgoing[this._count].timer=new Date),this._sendWindowedChunks(this._count),this._count+=1)},n.prototype._setupInterval=function(){var n=this;this._timeout=setInterval(function(){var e=n._queue.shift();if(e._multiple)for(var t=0,r=e.length;t<r;t+=1)n._intervalSend(e[t]);else n._intervalSend(e)},this._interval)},n.prototype._intervalSend=function(e){var t=this;e=u.pack(e),u.blobToBinaryString(e,function(e){t._dc.send(e)}),0===t._queue.length&&(clearTimeout(t._timeout),t._timeout=null)},n.prototype._processAcks=function(){for(var e in this._outgoing)this._outgoing.hasOwnProperty(e)&&this._sendWindowedChunks(e)},n.prototype._handleSend=function(e){for(var t=!0,r=0,n=this._queue.length;r<n;r+=1){var i=this._queue[r];i===e?t=!1:i._multiple&&-1!==i.indexOf(e)&&(t=!1)}t&&(this._queue.push(e),this._timeout||this._setupInterval())},n.prototype._setupDC=function(){var n=this;this._dc.onmessage=function(e){var t=e.data;if(t.constructor===String){var r=u.binaryStringToArrayBuffer(t);t=u.unpack(r),n._handleMessage(t)}}},n.prototype._handleMessage=function(e){var t,r=e[1],n=this._incoming[r],i=this._outgoing[r];switch(e[0]){case"no":var o=r;o&&this.onmessage(u.unpack(o));break;case"end":if(t=n,this._received[r]=e[2],!t)break;this._ack(r);break;case"ack":if(t=i){var s=e[2];t.ack=Math.max(s,t.ack),t.ack>=t.chunks.length?(u.log("Time: ",new Date-t.timer),delete this._outgoing[r]):this._processAcks()}break;case"chunk":if(!(t=n)){if(!0===this._received[r])break;t={ack:["ack",r,0],chunks:[]},this._incoming[r]=t}var a=e[2],c=e[3];t.chunks[a]=new Uint8Array(c),a===t.ack[2]&&this._calculateNextAck(r),this._ack(r);break;default:this._handleSend(e)}},n.prototype._chunk=function(e){for(var t=[],r=e.size,n=0;n<r;){var i=Math.min(r,n+this._mtu),o={payload:e.slice(n,i)};t.push(o),n=i}return u.log("Created",t.length,"chunks."),t},n.prototype._ack=function(e){var t=this._incoming[e].ack;this._received[e]===t[2]&&(this._complete(e),this._received[e]=!0),this._handleSend(t)},n.prototype._calculateNextAck=function(e){for(var t=this._incoming[e],r=t.chunks,n=0,i=r.length;n<i;n+=1)if(void 0===r[n])return void(t.ack[2]=n);t.ack[2]=r.length},n.prototype._sendWindowedChunks=function(e){u.log("sendWindowedChunks for: ",e);for(var t=this._outgoing[e],r=t.chunks,n=[],i=Math.min(t.ack+this._window,r.length),o=t.ack;o<i;o+=1)r[o].sent&&o!==t.ack||(r[o].sent=!0,n.push(["chunk",e,o,r[o].payload]));t.ack+this._window>=r.length&&n.push(["end",e,r.length]),n._multiple=!0,this._handleSend(n)},n.prototype._complete=function(e){u.log("Completed called for",e);var t=this,r=this._incoming[e].chunks,n=new Blob(r);u.blobToArrayBuffer(n,function(e){t.onmessage(u.unpack(e))}),delete this._incoming[e]},n.higherBandwidthSDP=function(e){var t=navigator.appVersion.match(/Chrome\/(.*?) /);if(t&&(t=parseInt(t[1].split(".").shift()))<31){var r=e.split("b=AS:30");if(1<r.length)return r[0]+"b=AS:102400"+r[1]}return e},n.prototype.onmessage=function(e){},t.exports.Reliable=n},{"./util":27}],27:[function(e,t,r){var n=e("js-binarypack"),i={debug:!1,inherits:function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},extend:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},pack:n.pack,unpack:n.unpack,log:function(){if(i.debug){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift("Reliable: "),console.log.apply(console,e)}},setZeroTimeout:function(t){var r=[],n="zero-timeout-message";function e(e){e.source==t&&e.data==n&&(e.stopPropagation&&e.stopPropagation(),r.length&&r.shift()())}return t.addEventListener?t.addEventListener("message",e,!0):t.attachEvent&&t.attachEvent("onmessage",e),function(e){r.push(e),t.postMessage(n,"*")}}(this),blobToArrayBuffer:function(e,t){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsArrayBuffer(e)},blobToBinaryString:function(e,t){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsBinaryString(e)},binaryStringToArrayBuffer:function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer},randomToken:function(){return Math.random().toString(36).substr(2)}};t.exports=i},{"js-binarypack":10}],28:[function(e,t,r){var n,c=1,u=function(){c=c+1&65535};t.exports=function(e){n||(n=setInterval(u,250)).unref&&n.unref();var i=4*(e||5),o=[0],s=1,a=c-1&65535;return function(e){var t=c-a&65535;for(i<t&&(t=i),a=c;t--;)s===i&&(s=0),o[s]=o[0===s?i-1:s-1],s++;e&&(o[s-1]+=e);var r=o[s-1],n=o.length<i?0:o[s===i?0:s];return o.length<4?r:4*(r-n)/o.length}}},{}],29:[function(c,e,u){(function(e,t){var n=c("process/browser.js").nextTick,r=Function.prototype.apply,i=Array.prototype.slice,o={},s=0;function a(e,t){this._id=e,this._clearFn=t}u.setTimeout=function(){return new a(r.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new a(r.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(e){e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},u.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},u._unrefActive=u.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},u.setImmediate="function"==typeof e?e:function(e){var t=s++,r=!(arguments.length<2)&&i.call(arguments,1);return o[t]=!0,n(function(){o[t]&&(r?e.apply(null,r):e.call(null),u.clearImmediate(t))}),t},u.clearImmediate="function"==typeof t?t:function(e){delete o[e]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":21,timers:29}],30:[function(e,t,r){var A=e("punycode"),O=e("./util");function B(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=o,r.resolve=function(e,t){return o(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?o(e,!1,!0).resolveObject(t):t},r.format=function(e){O.isString(e)&&(e=o(e));return e instanceof B?e.format():B.prototype.format.call(e)},r.Url=B;var M=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,L=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),H=["'"].concat(i),N=["%","/","?",";","#"].concat(H),z=["/","?","#"],q=/^[+a-z0-9A-Z_-]{0,63}$/,F=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,j={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},X={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},G=e("querystring");function o(e,t,r){if(e&&O.isObject(e)&&e instanceof B)return e;var n=new B;return n.parse(e,t,r),n}B.prototype.parse=function(e,t,r){if(!O.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===e?"undefined":_typeof(e)));var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(i);o[0]=o[0].replace(/\\/g,"/");var s=e=o.join(i);if(s=s.trim(),!r&&1===e.split("#").length){var a=L.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?G.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=M.exec(s);if(c){var u=(c=c[0]).toLowerCase();this.protocol=u,s=s.substr(c.length)}if(r||c||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var p="//"===s.substr(0,2);!p||c&&U[c]||(s=s.substr(2),this.slashes=!0)}if(!U[c]&&(p||c&&!X[c])){for(var f,h,l=-1,d=0;d<z.length;d++){-1!==(_=s.indexOf(z[d]))&&(-1===l||_<l)&&(l=_)}-1!==(h=-1===l?s.lastIndexOf("@"):s.lastIndexOf("@",l))&&(f=s.slice(0,h),s=s.slice(h+1),this.auth=decodeURIComponent(f)),l=-1;for(d=0;d<N.length;d++){var _;-1!==(_=s.indexOf(N[d]))&&(-1===l||_<l)&&(l=_)}-1===l&&(l=s.length),this.host=s.slice(0,l),s=s.slice(l),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),y=(d=0,g.length);d<y;d++){var v=g[d];if(v&&!v.match(q)){for(var b="",w=0,S=v.length;w<S;w++)127<v.charCodeAt(w)?b+="x":b+=v[w];if(!b.match(q)){var k=g.slice(0,d),P=g.slice(d+1),E=v.match(F);E&&(k.push(E[1]),P.unshift(E[2])),P.length&&(s="/"+P.join(".")+s),this.hostname=k.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=A.toASCII(this.hostname));var C=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+C,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!j[u])for(d=0,y=H.length;d<y;d++){var T=H[d];if(-1!==s.indexOf(T)){var R=encodeURIComponent(T);R===T&&(R=escape(T)),s=s.split(T).join(R)}}var x=s.indexOf("#");-1!==x&&(this.hash=s.substr(x),s=s.slice(0,x));var I=s.indexOf("?");if(-1!==I?(this.search=s.substr(I),this.query=s.substr(I+1),t&&(this.query=G.parse(this.query)),s=s.slice(0,I)):t&&(this.search="",this.query={}),s&&(this.pathname=s),X[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){C=this.pathname||"";var D=this.search||"";this.path=C+D}return this.href=this.format(),this},B.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&O.isObject(this.query)&&Object.keys(this.query).length&&(o=G.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||X[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+n},B.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},B.prototype.resolveObject=function(e){if(O.isString(e)){var t=new B;t.parse(e,!1,!0),e=t}for(var r=new B,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];r[o]=this[o]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var c=s[a];"protocol"!==c&&(r[c]=e[c])}return X[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!X[e.protocol]){for(var u=Object.keys(e),p=0;p<u.length;p++){var f=u[p];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||U[e.protocol])r.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var l=r.pathname||"",d=r.search||"";r.path=l+d}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var _=r.pathname&&"/"===r.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=m||_||r.host&&e.pathname,y=g,v=r.pathname&&r.pathname.split("/")||[],b=(h=e.pathname&&e.pathname.split("/")||[],r.protocol&&!X[r.protocol]);if(b&&(r.hostname="",r.port=null,r.host&&(""===v[0]?v[0]=r.host:v.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),g=g&&(""===h[0]||""===v[0])),m)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,v=h;else if(h.length)v||(v=[]),v.pop(),v=v.concat(h),r.search=e.search,r.query=e.query;else if(!O.isNullOrUndefined(e.search)){if(b)r.hostname=r.host=v.shift(),(E=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=E.shift(),r.host=r.hostname=E.shift());return r.search=e.search,r.query=e.query,O.isNull(r.pathname)&&O.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!v.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var w=v.slice(-1)[0],S=(r.host||e.host||1<v.length)&&("."===w||".."===w)||""===w,k=0,P=v.length;0<=P;P--)"."===(w=v[P])?v.splice(P,1):".."===w?(v.splice(P,1),k++):k&&(v.splice(P,1),k--);if(!g&&!y)for(;k--;k)v.unshift("..");!g||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),S&&"/"!==v.join("/").substr(-1)&&v.push("");var E,C=""===v[0]||v[0]&&"/"===v[0].charAt(0);b&&(r.hostname=r.host=C?"":v.length?v.shift():"",(E=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=E.shift(),r.host=r.hostname=E.shift()));return(g=g||r.host&&v.length)&&!C&&v.unshift(""),v.length?r.pathname=v.join("/"):(r.pathname=null,r.path=null),O.isNull(r.pathname)&&O.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},B.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":31,punycode:22,querystring:25}],31:[function(e,t,r){t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],32:[function(e,t,r){t.exports=function(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],33:[function(h,e,B){(function(n,i){var a=/%[sdj%]/g;B.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(a,function(e){if("%%"===e)return"%";if(i<=r)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<i;s=n[++r])y(s)||!p(s)?o+=" "+s:o+=" "+c(s);return o},B.deprecate=function(e,t){if(w(i.process))return function(){return B.deprecate(e,t).apply(this,arguments)};if(!0===n.noDeprecation)return e;var r=!1;return function(){if(!r){if(n.throwDeprecation)throw new Error(t);n.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}};var e,o={};function c(e,t){var r={seen:[],stylize:u};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&B._extend(r,t),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),l(r,e,r.depth)}function s(e,t){var r=c.styles[t];return r?"["+c.colors[r][0]+"m"+e+"["+c.colors[r][1]+"m":e}function u(e,t){return e}function l(t,r,n){if(t.customInspect&&r&&E(r.inspect)&&r.inspect!==B.inspect&&(!r.constructor||r.constructor.prototype!==r)){var e=r.inspect(n,t);return b(e)||(e=l(t,e,n)),e}var i=function(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(v(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(y(t))return e.stylize("null","null")}(t,r);if(i)return i;var o,s=Object.keys(r),a=(o={},s.forEach(function(e,t){o[e]=!0}),o);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),P(r)&&(0<=s.indexOf("message")||0<=s.indexOf("description")))return d(r);if(0===s.length){if(E(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(S(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(k(r))return t.stylize(Date.prototype.toString.call(r),"date");if(P(r))return d(r)}var u,p="",f=!1,h=["{","}"];(m(r)&&(f=!0,h=["[","]"]),E(r))&&(p=" [Function"+(r.name?": "+r.name:"")+"]");return S(r)&&(p=" "+RegExp.prototype.toString.call(r)),k(r)&&(p=" "+Date.prototype.toUTCString.call(r)),P(r)&&(p=" "+d(r)),0!==s.length||f&&0!=r.length?n<0?S(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),u=f?function(t,r,n,i,e){for(var o=[],s=0,a=r.length;s<a;++s)C(r,String(s))?o.push(_(t,r,n,i,String(s),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(_(t,r,n,i,e,!0))}),o}(t,r,n,a,s):s.map(function(e){return _(t,r,n,a,e,f)}),t.seen.pop(),function(e,t,r){if(60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,p,h)):h[0]+p+h[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function _(e,t,r,n,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),C(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?-1<(a=y(r)?l(e,c.value,null):l(e,c.value,r-1)).indexOf("\n")&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function m(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function y(e){return null===e}function v(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return void 0===e}function S(e){return p(e)&&"[object RegExp]"===t(e)}function p(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e}function k(e){return p(e)&&"[object Date]"===t(e)}function P(e){return p(e)&&("[object Error]"===t(e)||e instanceof Error)}function E(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function r(e){return e<10?"0"+e.toString(10):e.toString(10)}B.debuglog=function(t){if(w(e)&&(e=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(e)){var r=n.pid;o[t]=function(){var e=B.format.apply(B,arguments);console.error("%s %d: %s",t,r,e)}}else o[t]=function(){};return o[t]},(B.inspect=c).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},B.isArray=m,B.isBoolean=g,B.isNull=y,B.isNullOrUndefined=function(e){return null==e},B.isNumber=v,B.isString=b,B.isSymbol=function(e){return"symbol"===(void 0===e?"undefined":_typeof(e))},B.isUndefined=w,B.isRegExp=S,B.isObject=p,B.isDate=k,B.isError=P,B.isFunction=E,B.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":_typeof(e))||void 0===e},B.isBuffer=h("./support/isBuffer");var f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}B.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[r(e.getHours()),r(e.getMinutes()),r(e.getSeconds())].join(":"),[e.getDate(),f[e.getMonth()],t].join(" ")),B.format.apply(B,arguments))},B.inherits=h("inherits"),B._extend=function(e,t){if(!t||!p(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,h("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":32,_process:21,inherits:9}],34:[function(e,t,r){var n,i,p=e("./log").getLogger("player"),c=e("url"),f=e("js-sha1"),h=e("m3u8-parser");e("./util");function l(){return n&&0<n.buffered.length?parseInt(n.buffered.end(n.buffered.length-1))-n.currentTime:0}var d={onSeek:function(){this.cdn.clear(d.infoHash)},getDplayer:function(u,e){this.cdn=u;var r={maxBufferLength:120,maxBufferSize:2,pLoader:function(e){var r=new Hls.DefaultConfig.loader(e);this.abort=function(){return r.abort()},this.destroy=function(){return r.destroy()},this.load=function(e,t,a){e.type;var c=e.url;p.debug("Manifest "+c+" will be loaded."),a._onSuccess=a.onSuccess,a.onSuccess=function(e,t,r,n){if(!d.infoHash&&0<=e.data.indexOf("#EXT-X-ENDLIST")){var i=e.data.split("\n"),o="";i.length<12?o=f(e.data).substring(0,8):(i.splice(12),o=f(i.join("\n")).substring(0,8));var s=new h.Parser;s.push(e.data),s.end(),d.m3u8list=s.manifest,d.infoHash=o,u.opts.globalHash&&(p.debug("use global hash",u.opts.globalHash),d.infoHash=u.opts.globalHash),p.debug("infohash "+c+" is: "+o)}a._onSuccess(e,t,r,n)},r.load(e,t,a)}},fLoader:function(e){var a=this,t=new Hls.DefaultConfig.loader(e);this.abort=function(){return t.abort()},this.destroy=function(){return t.destroy()},this.load=function(n,e,i){n.type;var o=n.url,t=c.parse(o).pathname;p.debug("fragement "+o+" will be loaded.",e.timeout),t=f(t).substring(0,4);for(var r=0;r<d.m3u8list.segments.length;r++)if(0<=o.indexOf(d.m3u8list.segments[r].uri)){d.curpos=r;break}var s=u.request(d.infoHash,t,o,l,function(e,t){if(e)return i.onError({code:-3,text:e},n);var r=0;r="string"==typeof t?t.length:t.byteLength,i.onSuccess({url:o,data:t},{loaded:r},n)});a.abort=function(){u.abort(s)},a.destroy=a.abort}}};return{url:e,type:"customHls",customType:{customHls:function(e,t){i=new Hls(r),(n=e).onseeking=function(){d.onSeek()},i.loadSource(e.src),i.attachMedia(e)}}}}};t.exports=d},{"./log":5,"./util":37,"js-sha1":12,"m3u8-parser":13,url:30}],35:[function(e,t,r){var n=e("peerjs"),a=e("./log").getLogger("rtcloader"),i=e("./rtctrans"),o=e("./version").version,c=e("./connpool"),u=e("./lzma"),s=e("speedometer"),p=e("extend");function f(){this._obj={version:e("./version").version,createAt:(new Date).getTime(),totalDownload:0,totalUpload:0,incrementDownload:0,incrementUpload:0},this.incrementDownload_base=0,this.incrementUpload_base=0,this._down_speed_1m=s(60),this._down_speed_5m=s(300),this.infoHashReport={},this._up_speed_1m=s(60),this._up_speed_5m=s(300)}function h(e){this.opts=e,this.subscribes={},this.requestQueue={},this.name=this.opts.name,this.rtcupload=0,this.rtcdownload=0,this.PeerpiecesRequestAt={},this.PeerconnRequestAt={},this.peerState=new f;var t=!1;"https"!=this.opts.server.protocol&&"wss"!=this.opts.server.protocol||(t=!0);var r={iceServers:[{url:"stun:stun.counterpath.com"},{url:"stun:stun.l.google.com:19302"}],host:this.opts.server.host,port:this.opts.server.port,secure:t,protocol:this.opts.server.protocol,path:this.opts.server.path?this.opts.server.path:"/api/peer"};this.opts.key&&(r.key=this.opts.key),this.peer=new n(r),a.debug("rtcloader use config ",r)}f.prototype.setValue=function(e,t){this._obj[e]=t},f.prototype.incDownload=function(e){isNaN(e)?a.debug("not number! ignore"):(this._down_speed_1m(e),this._down_speed_5m(e),this._obj.totalDownload+=e)},f.prototype.incUpload=function(e){isNaN(e)?a.debug("not number! ignore"):(this._up_speed_1m(e),this._up_speed_5m(e),this._obj.totalUpload+=e)},f.prototype.incValue=function(e,t,r){this._obj[e]?this._obj[e]+=t:this._obj[e]=(r||0)+t},f.prototype.decValue=function(e,t){this._obj[e]?this._obj[e]-=t:this._obj[e]=0},f.prototype.value=function(){return this._obj.online=parseInt(((new Date).getTime()-this._obj.createAt)/1e3),this._obj.incrementDownload=this._obj.totalDownload-this.incrementDownload_base,this.incrementDownload_base=this._obj.totalDownload,this._obj.incrementUpload=this._obj.totalUpload-this.incrementUpload_base,this.incrementUpload_base=this._obj.totalUpload,this._obj.downloadSpeed_1m=parseInt(this._down_speed_1m()/1024),this._obj.downloadSpeed_5m=parseInt(this._down_speed_5m()/1024),this._obj.uploadSpeed_1m=parseInt(this._up_speed_1m()/1024),this._obj.uploadSpeed_5m=parseInt(this._up_speed_5m()/1024),this._obj},h.prototype.getPeers=function(e){return this.subscribes[e]},h.prototype.send=function(e){a.debug("send message ",e),this.peer.socket.send(e)},h.prototype._testconn=function(e,t){var r=this;setTimeout(function(){r.peerState.incValue("_peertest_request",1);try{var t=r.peer.connect(e);if(null==t)return r.peerState.incValue("_peertest_request_err",1);t.on("open",function(){r.peerState.incValue("_peertest_request_open",1);t.send(JSON.stringify({type:"detail",infoHash:"_test_hash"}))}),t.on("data",function(e){r.peerState.incValue("_peertest_request_ok",1),t.close()}),t.on("close",function(e){r.peerState.incValue("_peertest_request_close",1)}),t.on("error",function(e){r.peerState.incValue("_peertest_request_err",1)})}catch(e){a.debug("========================",e)}},t)},h.prototype._test=function(e){if(this.peer.id){a.debug("start test...",e.length),this.peerState.incValue("_peertest_request_total",e.length);for(var t=0;t<e.length;t++)this._testconn(e[t],500*t)}},h.prototype._onMessage=function(r){var n=this;if(a.debug("recv  message",r),"peerlist"==r.type)n.subscribes[r.infoHash]=r.peers.map(function(t){var e=n.subscribes[r.infoHash].find(function(e){return e.peerid==t});return{peerid:t,state:0,pieces:e?e.pieces:[]}});else if("test"==r.type)n._test(r.peers);else if("newpeer"==r.type){n.subscribes[r.infoHash].find(function(e){return e.peerid==r.peerid})||(n.subscribes[r.infoHash].push({peerid:r.peerid,state:0}),a.info("add peer to list "+r.peerid))}else if("peerclose"==r.type)for(var e in n.subscribes)for(var t=!0;t;){t=!1;for(var i=0;i<n.subscribes[e].length;i++)if(n.subscribes[e][i].peerid==r.peerid){a.info("remove peer from list "+r.peerid),n.subscribes[e].splice(i,1),t=!0;break}}else n.peer._orghandleMessage(r)},h.prototype.init=function(){var s=this,e=this.peer;this.pool=new c(e,this.opts),e._orghandleMessage=e._handleMessage,e._handleMessage=function(e){s._onMessage(e)},e.on("open",function(e){a.info("peer is open : "+e),s.peerid||(s.peerid=e),s.infoHashReport={},s.open=!0,s.openAt=new Date,setTimeout(function(){var e={type:"subscribe",version:o,resource:Object.keys(s.subscribes)};s.send(e)},200)}),e.on("connection",function(o){a.debug("rtcloader onconneciton from  "+o.peer),s.peerState.incValue("inpeers",1,0),o.on("data",function(e){if(a.debug("rtcloader ondata from  "+o.peer,e),"string"==typeof e){a.debug("got request"+e);var n=JSON.parse(e);if("request"==n.type){var i={type:"requestRep",infoHash:n.infoHash,piece:n.piece,result:"nopiece"};s.opts.onPieceRequest(n.infoHash,n.piece,function(e,t){if(e&&!timeoutHandler)return o.send(JSON.stringify(i));s.rtcupload+=t.byteLength,s.peerState.incUpload(t.byteLength),s.p2ptransAt=new Date,o.send(t)})}else if("detail"==n.type){i={type:"detailRep"};s.opts.onPiecesInfoRequest(n.infoHash,function(e,t){if(!t)return a.debug("cache not hit???"),o.send(JSON.stringify(i));var r={type:"detailRep",online:parseInt(((new Date).getTime()-s.openAt.getTime())/1024),infoHash:n.infoHash,data:t};r.data=u.c(t.join(",")).join(","),o.send(JSON.stringify(r))})}else a.info("unknown command",e),o.close()}else a.info("unknown format command")}),o.on("close",function(){s.peerState.decValue("inpeers",1)})}),e.on("disconnected",function(){s.open=!1,a.debug("peer disconnected "+e.id)});this.rtctrans=new i(function(e,t,r){r||(r=5e3);var n=s.pool.getFreeConnectionByHash(e),i=null;if(s.subscribes[e].sort(function(e,t){return e.downloadError||(e.downloadError=0),t.downloadError||(t.downloadError=0),e.downloadError>t.downloadError}),0<n.length){var o=s.subscribes[e].find(function(e){return 0<=e.pieces.indexOf(t)});if(!o)return a.debug("peer have exit or no piece."),null;if(3<o.downloadError)return a.debug("maxdownload error ,ignore"),null;i=s.pool.getConnection(e,o.peerid)}return i}),setInterval(function(){s.piecesRequestAt&&18e5<=(new Date).getTime()-s.piecesRequestAt.getTime()&&(!s.p2ptransAt||18e5<=(new Date).getTime()-s.p2ptransAt.getTime())?0==s.peer.disconnected&&(a.debug("long time idle.disconnect"),s.peer.disconnect()):1==s.peer.disconnected&&s.peerid&&(a.debug("reconect!"),s.peer.reconnect())},3e4),setInterval(function(){if(0!=s.open){var e={type:"report",state:{outpeers:s.pool.getTotalConnectPeer(),outconnections:s.pool.getTotalConnection(),cache:s.opts.onCacheUsage?s.opts.onCacheUsage():0}};p(e.state,s.peerState.value()),s.send(e)}},3e4),setInterval(function(){s._pieceUpdate()},1e3)},h.prototype._pieceUpdate=function(){var t=this;for(var r in this.subscribes){var e=t.pool.getFreeConnectionByHash(r);if(!(5<=e.length)){var n=5-e.length;t.subscribes[r].forEach(function(e){t.PeerpiecesRequestAt[e.peerid]||(t.PeerpiecesRequestAt[e.peerid]={lastPieceRequest:new Date((new Date).getTime()-3e5),pieceRequestErrorCount:0}),t.PeerpiecesRequestAt[e.peerid].pieceRequestErrorCount&&1<=t.PeerpiecesRequestAt[e.peerid].pieceRequestErrorCount||n<=0||6e4<=(new Date).getTime()-t.PeerpiecesRequestAt[e.peerid].lastPieceRequest.getTime()&&(t._detail(e.peerid,r),n--,t.PeerpiecesRequestAt[e.peerid].lastPieceRequest=new Date)})}}},h.prototype._detail=function(i,t){var o=this,e=o.pool.getConnection(t,i),r=!1;e||(e=o.pool.create(t,i,1e4),r=!0),e?(a.debug("detail preconnect ",i," iscreate ",r),e.on("open",function(){var e={type:"detail",infoHash:t};this.send(JSON.stringify(e))}),e.on("data",function(e){if(a.debug("recev pieces msg from",i),"string"!=typeof e)return a.debug("not String?????"),void this.close();var t=JSON.parse(e);if("detailRep"==t.type){if(!t.data)return a.debug("no piece info from",i),void this.close();var r=o.subscribes[t.infoHash].find(function(e){return e.peerid==i});if(r){var n=t.data.split(",");n.forEach(function(e){e=parseInt(e)}),t.data=u.d(n).split(","),r.pieces=t.data,r.peers=t.peers,r.online=t.online,r.piecesUpdateAt=new Date}}this.close()}),e.on("error",function(){o.PeerpiecesRequestAt[i].pieceRequestErrorCount++,a.debug("pre get connection failed.",i)})):a.debug("get connection failed.")},h.prototype.batchSubscribe=function(e){var t=this;e.forEach(function(e){t.subscribes[e]||(t.subscribes[e]=[])});var r=e.filter(function(e){return!t.subscribes[e]});if(this.open){var n={type:"subscribe",version:o,resource:r};this.send(n)}},h.prototype.subscribe=function(e){if(this.subscribes[e]||(this.subscribes[e]=[]),this.open&&!this.infoHashReport[e]){var t={type:"subscribe",version:o,resource:e};this.infoHashReport[e]=1,this.send(t)}},h.prototype.getWithBlackList=function(e,t,r,n){this.blacklist=r,a.debug("black list enable, ignore ",r),this.get(e,t,1e4,n)},h.prototype.clear=function(e){this.rtctrans.clear(e)},h.prototype.get=function(n,e,t,i){var o=this;if(this.subscribe(n),!this.peer.id)return setTimeout(function(){i("signalServer not connect.")},10);this.rtctrans.addTask(n,e,t,function(t,e){if(o.peerState.incValue("p2prequest",1,0),t){if(t.err_code?(o.peerState.incValue("p2prequest_err",1,0),-1==t.err_code?o.peerState.incValue("p2prequest_err_noconn",1,0):-2==t.err_code?o.peerState.incValue("p2prequest_err_conn_err",1,0):-3==t.err_code?o.peerState.incValue("p2prequest_err_unknowrep",1,0):-6==t.err_code?o.peerState.incValue("p2prequest_err_nopiece",1,0):1==t.err_code?o.peerState.incValue("p2prequest_err_timeout",1,0):o.peerState.incValue("p2prequest_err_unknown2",1,0)):o.peerState.incValue("p2prequest_err_unknown",1,0),t.peerid){var r=o.subscribes[n].find(function(e){return e.peerid==t.peerid});r&&(t.downloadError?r.downloadError++:r.downloadError=1)}}else e?(o.peerState.incValue("p2prequest_ok",1,0),o.rtcdownload+=e.byteLength?e.byteLength:0,o.peerState.incDownload(e.byteLength)):o.peerState.incValue("p2prequest_err_nodata",1,0);i(t?t.desc:null,e)})},t.exports=h},{"./connpool":3,"./log":5,"./lzma":6,"./rtctrans":36,"./version":38,extend:8,peerjs:18,speedometer:28}],36:[function(e,t,r){var n=e("extend"),o=e("./log").getLogger("rtctrans"),s={maxTasks:5,maxConCurrentPerTask:2,taskTimeout:15e3,maxRetryPeers:10};function i(e,t){var r=this;this.opts={},this._queue=[],n(this.opts,s,t),this.onConnectPeerCallback=e,setInterval(function(){r._check()},200),this.blacklist={}}i.prototype.addTask=function(e,t,r,n){var i={infoHash:e,piece:t,timeout:r||s.taskTimeout,cb:n,state:0};this._queue.push(i)},i.prototype._startTrans=function(n){var e={type:"request",infoHash:n.infoHash,piece:n.piece},i=this.onConnectPeerCallback(n.infoHash,n.piece);if(null==i)return o.debug("cant't get connecton"),n.state=-1,void(n.result="no available connecton");n.peerid=i.remotePeerId,i.on("open",function(){o.debug("request",JSON.stringify(e)),this.send(JSON.stringify(e))}),i.on("data",function(e){var t=e.byteLength?e.byteLength:e.length;if("string"!=typeof e)this.close(),1==n.state&&(o.debug("got data",t,"from",i.remotePeerId,t<=64?e:"**********"),n.data=e,n.state=5);else{this.close();try{var r=JSON.parse(e);"requestRep"==r.type?(o.error("piece ",r.infoHash,"not exist"),n.state=-6,n.result="piece not exist"):(n.state=-3,n.result="unknow response",o.error("unknow response",e))}catch(e){n.state=-3,n.result="unknow response(2)"}}}),i.on("error",function(e){o.debug("peer connect error",e),1==n.state&&(n.state=-2,n.result="transing error")})},i.prototype.taskTotal=function(){return this._queue.length},i.prototype.clear=function(e){o.debug("clear all task");for(var t=0;t<this._queue.length;t++)(e&&this._queue[t].infoHash==e||!e)&&0==this._queue[t].state&&(this._queue[t].state=-1)},i.prototype._check=function(){for(var e=0,t=0;t<this._queue.length;t++)1==this._queue[t].state&&e++;for(t=0;t<this._queue.length;t++)0==this._queue[t].state&&e<this.opts.maxTasks&&(this._queue[t].state=1,this._queue[t].startupAt=new Date,this._startTrans(this._queue[t]));for(t=0;t<this._queue.length;t++){if(this._queue[t].state<0){this._queue[t].cb({err_code:this._queue[t].state,desc:this._queue[t].result}),this._queue.splice(t,1);break}if(1==this._queue[t].state&&(new Date).getTime()-this._queue[t].startupAt.getTime()>=this._queue[t].timeout){this._queue[t].cb({err_code:1,desc:"task timeout"+this._queue[t].timeout,peerid:this._queue[t].peerid}),this._queue.splice(t,1);break}}for(t=0;t<this._queue.length;t++)if(5==this._queue[t].state){this._queue[t].cb&&this._queue[t].cb(null,this._queue[t].data),this._queue[t].cb=null,this._queue.splice(t,1);break}},t.exports=i},{"./log":5,extend:8}],37:[function(e,t,r){t.exports={uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},randomNum:function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}},formatSize:function(e){for(var t=new Array("Bytes","KB","MB","GB","TB","PB"),r=0;900<e;)e/=1024,r++;return Math.round(100*e)/100+" "+t[r]}}},{}],38:[function(e,t,r){t.exports={version:"1.2.8"}},{}]},{},[2])(2)});